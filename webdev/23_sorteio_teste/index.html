<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programa de Sorteio</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-tooltipster/3.3.0/css/tooltipster.min.css">
    <style>

:root{
    --cor0: #35353F;
    --cor1: #45C398;
    --cor2: #232931;
    --cor3: #4ECCA3;
   

    --fonte-0: 'Lobster Two', cursive;
    --font-1: 'Lobster', cursive; 
    --fonte-2: 'Indie Flower', cursive;

}

*{
    margin: 0px;
    padding: 0px;
}
        body{
    background-color: var(--cor2);
    color: var(--cor3);
    text-align: center;
    font-family: 'Indie Flower', cursive;
}
form {
  padding: 20px;
  background-color: var(--cor0);
  border-radius: 5px;
  margin: 30px;
}
label {
    font-weight: bold;
    color: var(--cor3);
}

input {
    padding: 12px;
    margin: 8px 0;
    border-radius: 4px;
    border: 1px solid var(--cor1);
    box-sizing: border-box;
}
button {
    background-color: var(--cor1);
    color: white;
    padding: 14px 20px;
    margin: 8px 0;
    border: none;
    cursor: pointer;
}

button:hover {
    opacity: 0.8;
}

#bracket {
    display: none;
    margin-top: 20px;
    padding: 20px;
    background-color: var(--cor0);
    border-radius: 5px;
    font-family: 'Lobster Two', cursive;
}

.team {
  margin-top: 10px;
  padding: 10px;
  background-color: var(--cor1);
  color: white;
  border-radius: 5px;
  width: 45%;
  text-align: center;
  margin-right: 5%;
  float: left;
}

.team-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    padding: 20px;
    background-color: var(--cor0);
    border-radius: 5px;
    box-shadow: 0px 0px 10px #ccc;
    transition: all 0.5s ease-in-out;
}
nav {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #35353F;
}
nav ul {
  list-style: none;
  display: flex;
  justify-content: center;
  align-items: center;
}
nav ul li {
  margin: 0 20px;
}
nav ul li a {
  color: white;
  text-decoration: none;
  font-family: 'Lobster Two', cursive;
  font-size: 20px;
}
nav ul li a:hover {
  color: #4ECCA3;
}
</style>

</head>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">My App</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Sorteio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Jogo de Dados</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Jogo do Simon</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Calculadora</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">To-Do-List</a>
        </li>
      </ul>
    </div>
  </nav>
<body>

    <form id="form">
        <div id="input-container"></div>
        <button type="button" onclick="addInput()">Add Name</button>
        <br>
        <label for="num-players">Number of players per team:</label>
        <select id="num-players" name="num-players">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
        <br><br>
        <button type="button" onclick="generateTeams()">Generate Teams</button>
      </form>
    <div id="bracket"></div>
    <div id="bracket">
        <div class="team-container">
            <!-- Aqui é onde as equipas geradas serão adicionadas -->
        </div>
    </div>
    
    

<script>

let inputElements = document.querySelectorAll('[name^=name]'); // selects all elements with a name attribute that starts with "name"

document.getElementById("form").addEventListener("keypress", function(event) { // adds an event listener to the form that listens for a keypress event
  if (event.key === "Enter") { // if the key pressed is the Enter key
    addInput(); // add an input field to the form
    inputElements = document.querySelectorAll('[name^=name]'); //update the inputElements variable to now include the new input field
    inputElements[inputElements.length-1].focus(); // sets focus to the last input field that was added
  }
});


var inputCount = 1; //variable to keep track of the number of inputs added

function addInput() {
    var inputContainer = document.getElementById("input-container"); //get the container where the inputs are added
    var input = document.createElement("input"); //create a new input element
    input.type = "text"; //set the input type to text
    input.name = "name" + inputCount; //set the input name with the inputCount variable
    input.placeholder = "Name " + (inputCount + 1); //set the input placeholder with the inputCount variable
    inputContainer.appendChild(input); //append the input to the container
    inputCount++; //increment the inputCount variable
  }

  function generateTeams() {
    // Declarar uma lista vazia para armazenar os nomes
    var names = [];
    // Loop através de todos os inputs com nome começando com "name"
    for (let i = 0; i < inputCount; i++) {
        // Selecionar o input atual através de seu nome
        var nameInput = document.getElementsByName("name" + i)[0];
        // Verificar se o input existe e se tem algum valor
        if (nameInput && nameInput.value) {
            // Adicionar o valor do input à lista de nomes
            names.push(nameInput.value);
        }
    }
    // Obter o valor selecionado do select de jogadores por equipe
    var numPlayers = document.getElementById("num-players").value;

    // Validar se o número de jogadores por equipe é válido
    if (names.length < numPlayers) {
        alert("Not enough players for teams of " + numPlayers + " players.");
        return;
    }

    // Embaralhar os nomes
    for (let i = names.length - 1; i > 0; i--) {
        // Gerar um número aleatório com base no tamanho da lista de nomes
        const j = Math.floor(Math.random() * (i + 1));
        // Trocar a posição dos nomes na lista
        [names[i], names[j]] = [names[j], names[i]];
    }

    // Dividir os nomes em equipes
    var teams = [];
    // Calcular o tamanho da equipe baseado no número de jogadores por equipe
    var teamSize = Math.floor(names.length / numPlayers);
    // Calcular o resto da divisão
    var remainder = names.length % numPlayers;
    // Criar uma equipe para cada jogador
    for (let i = 0; i < teamSize + (remainder ? 1 : 0); i++) {
        teams.push([]);
    }

    // Loop para adicionar cada nome à equipe correspondente
for (let i = 0; i < names.length; i++) {
    teams[i % (teamSize + (remainder ? 1 : 0))].push(names[i]);
}

// Obter o elemento que irá conter as equipes
var bracket = document.getElementById("bracket");
// Limpar o conteúdo do elemento
bracket.innerHTML = ""; 

// Criar um elemento container para as equipes
var teamContainer = document.createElement("div");
// Adicionar a classe "team-container" ao elemento
teamContainer.classList.add("team-container");

// Loop para criar um elemento para cada equipe
for (let i = 0; i < teams.length; i++) {
    var teamDiv = document.createElement("div");
    // Adicionar a classe "team" ao elemento
    teamDiv.classList.add("team");
    // Adicionar o nome da equipe e seus jogadores ao elemento
    teamDiv.innerHTML = "Team " + (i+1) + ": " + teams[i].join(", ");
    // Adicionar o elemento da equipe ao container
    teamContainer.appendChild(teamDiv);
}

// Adicionar o container de equipes ao elemento principal
bracket.appendChild(teamContainer);
// Exibir o elemento principal
bracket.style.display = "block";
  }



</script>
</body>
</html>

