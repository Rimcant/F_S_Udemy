ageUrl:e.profile_image_url_https,screenName:e.screen_name,verifiedType:e.verified_type,withHoverCard:!0,withLink:!0})),t?o.createElement(w.Z,{humanReadable:!0,timestamp:t}):null);var _=n(36934),x=n(4642),P=n(73036);const M=p().ced3c85a,A=u.Z.create((e=>({popover:{minWidth:e.spaces.space80,marginHorizontal:e.spaces.space20,marginVertical:e.spaces.space12,justifyContent:"center"},label:{alignItems:"center",backgroundColor:e.colors.gray50,borderRadius:e.borderRadii.xSmall,color:e.colors.gray900,cursor:"pointer",marginStart:e.spaces.space8,paddingHorizontal:`calc(${e.spaces.space4} + ${e.spaces.space2})`,paddingVertical:e.spaces.space4},lastEditedText:{color:e.colors.buttonBlack}}))),B=({lastPublishedAtMs:e})=>{const t=P.ZP.isMobileOS(),n=o.useCallback((()=>{const t=o.createElement(w.Z,{color:"buttonBlack",humanReadable:!0,timestamp:e});return o.createElement(_.ZP,{size:"subtext1",style:A.lastEditedText},o.createElement(p().I18NFormatMessage,{$i18n:"a20c0721"},t))}),[e]);return o.createElement(x.Z,{contentStyle:A.popover,enableHover:!0,preferredVerticalOrientation:t?"up":"down",renderContent:n,withArrow:!0,withMask:t},o.createElement(_.ZP,{size:"subtext3",style:A.label,weight:"bold"},M))},L=u.Z.create((e=>({container:{flexDirection:"row",justifyContent:"space-between"}}))),D=({articleMetadata:e,author:t})=>{const n=e.lastPublishedAtMs&&e.publishedAtMs!==e.lastPublishedAtMs;return o.createElement(r.Z,{style:L.container},o.createElement(T,{author:t,publishedAtMs:e.publishedAtMs?Number(e.publishedAtMs):null}),n?o.createElement(B,{lastPublishedAtMs:Number(e.lastPublishedAtMs)}):null)};var F=n(23507);const R=u.Z.create((e=>({callout:{marginBottom:e.spaces.space32},calloutNarrow:{marginBottom:e.spaces.space16}}))),z=({isNarrow:e,onClose:t})=>o.createElement(F.Z,{onClose:t,style:e?R.calloutNarrow:R.callout,text:"No one but you, the author, can view this unpublished Note.",withCloseButton:!0});var H=n(8639);const O=u.Z.create((e=>({callout:{marginBottom:e.spaces.space32},calloutNarrow:{marginBottom:e.spaces.space16}}))),U=({isNarrow:e,onClose:t,onScribeEvent:n})=>{const r=o.useCallback((()=>{null==n||n({action:"click",component:"inline_callout",element:"help_center_link"})}),[n]);return o.createElement(F.Z,{Icon:H.default,headline:te,onClose:t,style:e?O.calloutNarrow:O.callout,text:o.createElement(p().I18NFormatMessage,{$i18n:"a9ce2dd5"},o.createElement(_.ZP,{color:"text",link:"https://help.twitter.com/using-twitter/notes",onClick:r,withUnderline:!0},p().edf9101f)),type:"primary",withCloseButton:!0})};n(71372);var W=n(1503),$=n(99241),K=n(83105),N=n(60396),V=n(11469),G=n(26318),j=n(29086),q=n(9352);const J=u.Z.theme.aspectRatios.maxTimelineImage,Q=u.Z.theme.aspectRatios.minTimelineImage,X=u.Z.create((e=>({media:{width:"100%"},atomicBlock:{marginBottom:e.spaces.space28}}))),Y=e=>{const{block:t,blockProps:n,contentState:r}=e,a=t.getEntityAt(0),i=a?r.getEntity(a):null,{media:l,onScribeEvent:s}=n||{},c=o.useCallback((e=>o.createElement(q.Z,{caption:e.text})),[]),d=(()=>{if(i){if(i.type===b.DC.TWEET)return"tweet";if(i.type===b.DC.MEDIA){const e=i.getData().mediaItems,t=e[0].mediaCategory;if(t===b._e.IMAGE)return e.length>1?"images":"image";if(t===b._e.GIF)return"gif";if(t===b._e.VIDEO)return"video"}}})();if(o.useEffect((()=>{null==s||s({action:"impression",component:d})}),[s,d]),!i)return null;const u=()=>{null==s||s({action:"click",component:d})},m=i.getData();if(i.type===b.DC.TWEET){const{tweetId:e}=m;return o.createElement(G.ZP,{onClick:u,style:X.atomicBlock,tweetId:e,withActionsDisabled:!1})}if(i.type===b.DC.MEDIA){const e=m.mediaItems.map((e=>null==l?void 0:l.find((t=>t.media_id===e.mediaId)))),t=(0,V.Z)(e,(e=>(0,j.m)(e))),n=m.caption?{text:m.caption,entities:[]}:void 0;return t?o.createElement(N.Z,{caption:n,mediaDetails:t,onClick:u,renderCaption:c,showBorder:!1,singleImageMaxAspectRatio:J,singleImageMinAspectRatio:Q,style:[X.media,X.atomicBlock],tweetId:"0"}):null}return null};function ee(e){const t=function(e){var t;const n=(0,$.h)("responsive_web_twitter_article_data_v2_enabled"),o=null==(t=e.data)?void 0:t.contentStateJson,r=e.data_v2;try{if(n&&r){const e=y.O(r);if(e){return(0,W.convertToRaw)(e)}}}catch(e){}try{if(!o)return;const e=JSON.parse(o);if(!e.entityMap||!e.blocks)throw new Error("Malformed RawDraftContentState");return e}catch(e){}}(e.twitterArticle);if(!t)return null;const n={atomic:{component:Y,editable:!1,props:{media:e.twitterArticle.media||[],onScribeEvent:e.onScribeEvent}}};return o.createElement(K._,{componentByType:n,contentState:t,onScribeEvent:e.onScribeEvent})}const te=p().a1f52146;const ne=u.Z.create((e=>({body:{paddingTop:e.spaces.space28},content:{paddingBottom:e.spaces.space80,paddingHorizontal:e.spaces.space48},paddingBottomLoggedOut:{paddingBottom:`calc(${e.spaces.space80} + ${e.spaces.space64})`},hoverStyle:{cursor:"initial"},paddingTopWithCallout:{paddingTop:e.spaces.space32},paddingTop:{paddingTop:e.spaces.space48},title:{lineHeight:`calc(${e.spaces.space40} + ${e.spaces.space4})`,paddingBottom:e.spaces.space32}}))),oe=u.Z.create((e=>({content:{paddingBottom:`calc(${e.spaces.space56} * 2)`,paddingHorizontal:e.spaces.space24},paddingBottomLoggedOut:{paddingBottom:e.spaces.space56},paddingTopWithCallout:{paddingTop:e.spaces.space16},paddingTop:{paddingTop:e.spaces.space24},title:{lineHeight:e.lineHeights.title3,paddingBottom:e.spaces.space28}}))),re=function(e){var t;const{author:n,onContainerPress:u,onLearnMoreCalloutImpression:m,onScribeEvent:p,shouldShowLearnMoreCallout:v,twitterArticle:w}=e,{featureSwitches:Z,loggedInUserId:C}=o.useContext(h.rC),S=Z.isTrue("responsive_web_twitter_article_cover_aspect_ratio_5_2"),[k,I]=o.useState(!!v),[T,_]=o.useState(C===n.id_str&&(null==(t=w.metadata)?void 0:t.visibility)===b.fk.DRAFT),x=(0,f.tY)(w),P=(0,y.S)(w.cover_image,S);o.useEffect((()=>{x&&(null==p||p({action:"impression",component:"cover_image"})),v&&(null==p||p({action:"impression",component:"inline_callout"}),null==m||m())}),[x,m,p,v,null==w?void 0:w.rest_id]);const M=()=>{null==p||p({action:"click",component:"footer",element:"follow"})},A=()=>{I(!1)},B=()=>{_(!1)};return o.createElement(c.Z,null,(({containerWidth:e})=>{var t;const c=d.Z.isNarrowScreenWidth(e),m=c?oe:ne;return o.createElement(s.Z,{interactive:!!u,interactiveStyles:{hoverStyle:ne.hoverStyle},onPress:u||void 0,testID:"twitterArticleReadView"},x?o.createElement(a.Z,{accessibilityLabel:"",aspectMode:i.Z.exact(P),image:x}):null,o.createElement(r.Z,{style:[m.content,k?m.paddingTopWithCallout:m.paddingTop,!C&&m.paddingBottomLoggedOut]},k?o.createElement(U,{isNarrow:c,onClose:A,onScribeEvent:p}):null,T?o.createElement(z,{isNarrow:c,onClose:B}):null,o.createElement(E.ZP,{extendedWidth:!0,size:c?"title4":"title1",style:c?oe.title:ne.title,title:w.title,weight:"heavy"}),w.metadata?o.createElement(D,{articleMetadata:w.metadata,author:n}):null,null!=(t=w.data)&&t.contentStateJson?o.createElement(r.Z,{style:ne.body,testID:"twitterArticleRichTextView"},o.createElement(ee,{onScribeEvent:p,twitterArticle:w})):null,o.createElement(l.Z,{spacing:c?"space28":"space32"}),o.createElement(g.ZP,{cellClickable:!1,decoration:!!C&&g.ET,displayMode:"UserDetailed",onFollowClick:M,userId:n.id_str})))}))}},65566:(e,t,n)=>{n.d(t,{ZP:()=>B});var o=n(2784),r=n(8352),a=n(73228),i=n.n(a),l=n(94407),s=n(73186),c=n(16955),d=n(8716),u=n(92160),m=n(55366);const p=(e,{bookmarkFolderId:t})=>t?m.ZP.select(e,t):void 0,h=(0,u.Z)().propsFromState((()=>({bookmarkFolder:p}))),g=s.Z.create((e=>({thumbnail:{borderRadius:e.borderRadii.infinite,height:"100%",width:"100%"}}))),y=h((({bookmarkFolder:e,onPress:t})=>{var n,r;const a=(0,d.Z)();return null!=e&&null!=(n=e.media)&&null!=(r=n.media_info)&&r.original_img_url?o.createElement(c.Z,{key:e.id,label:e.name,link:`/i/bookmarks/${e.id}`,onPress:e=>{a.scribe({element:"bookmark_folder",action:"click"}),t(e)},thumbnail:o.createElement(l.Z,{source:e.media.media_info.original_img_url,style:g.thumbnail})}):null}));var f=n(25686),b=n(48551);const E=i().bcc7e8c0,v=s.Z.create((e=>({thumbnail:{borderRadius:e.borderRadii.infinite,backgroundColor:s.Z.theme.colors.blue500,height:"100%",width:"100%",padding:s.Z.theme.spaces.space12,alignItems:"center",justifyContent:"center"},icon:{color:s.Z.theme.colors.white,width:s.Z.theme.fontSizes.title4,height:s.Z.theme.fontSizes.title4}}))),w=({onPress:e})=>{const t=(0,d.Z)();return o.createElement(c.Z,{key:"AllBookmarksCell",label:E,link:"/i/bookmarks/all",onPress:n=>{t.scribe({element:"bookmarks",action:"click"}),e(n)},thumbnail:o.createElement(f.Z,{style:v.thumbnail},o.createElement(b.default,{style:v.icon}))})};var Z=n(831),C=n(24949),S=n(16587),k=n(83317),I=n(57659);const T=()=>{const e=(0,S.Z)((e=>(0,k.Z)(e)));return(0,C.P1)(I.ZP.selectLoggedInUser,(t=>null!=t&&t.id_str?e(t.id_str):void 0))},_=(0,u.Z)().propsFromState((()=>({loggedInUser:I.ZP.selectLoggedInUser,sliceModule:T()}))).adjustStateProps((({loggedInUser:e,sliceModule:t})=>({sliceModule:t,isLoggedInUser:!!e}))).withAnalytics({page:"bookmark_folders"}),x=i().adad5408,P=i().be329aac,M=i().j0a47c9c,A=i().j45c642e,B=_((({analytics:e,isLoggedInUser:t,onCreateFolderPress:n,onFolderPress:a,sliceModule:i})=>{i||e.scribeAction("error");const l=o.useCallback((()=>(e.scribePageImpression({component:"empty",action:"impression"}),t&&n?o.createElement(r.Z,{buttonText:x,header:P,message:M,onButtonPress:n}):null)),[e,n,t]),s=e=>t=>{a&&(t.preventDefault(),a(e))};return o.createElement(o.Fragment,null,o.createElement(w,{onPress:s("all")}),i?o.createElement(Z.Z,{alwaysFetch:!0,module:i,noItemsRenderer:l,renderer:e=>o.createElement(y,{bookmarkFolderId:e,key:e,onPress:s(e)}),retryMessage:A}):null)}))},26318:(e,t,n)=>{n.d(t,{ZP:()=>w});var o=n(7896),r=n(2784),a=n(25686),i=n(29496),l=n(65502),s=n(73186),c=n(5952),d=n(18958),u=n(1206),m=n(72983),p=n(99400),h=n(92160),g=n(30102);const y=(e,t)=>{const{tweetId:n}=t;return n?g.ZP.selectHydrated(e,n):void 0},f=(e,t)=>{const{tweetId:n}=t;return n?g.ZP.selectFetchStatus(e,n):void 0},b=(0,h.Z)().propsFromState((()=>({tweet:y,fetchStatus:f}))).propsFromActions((()=>({fetchTweetIfNeeded:g.ZP.fetchOneIfNeeded}))),E=s.Z.create((e=>({container:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.medium,borderWidth:e.borderWidths.small,boxShadow:e.boxShadows.xSmall,flexDirection:"row",width:"100%"},tweet:{flex:1},iconClose:{color:e.colors.gray300},removeTweetButton:{alignSelf:"flex-start",marginEnd:e.spaces.space4,marginTop:e.spaces.space4},tombstoneContainer:{display:"flex"}}))),v=r.createElement(d.default,{style:E.iconClose}),w=b((({fetchStatus:e,fetchTweetIfNeeded:t,onClick:n,onRemove:s,style:d,tweet:h,tweetId:g,withActionsDisabled:y})=>{const f=r.useCallback((()=>{t(g)}),[g,t]);r.useEffect((()=>{g&&f()}),[f,g]);const b=()=>{n&&n()},w=s?r.createElement(i.ZP,{icon:v,onPress:s,preventFocusShift:!0,size:"small",style:E.removeTweetButton,testID:"remove-button",type:"primaryText"}):null,Z=e=>{const{link:t}=e,n="string"==typeof t?{pathname:t,state:{}}:t,a=n?{...n,anchorless:!1,external:!0,openInSameFrame:!1}:void 0;return r.createElement(l.Z.Timestamp,(0,o.Z)({},e,{link:a}))};return r.createElement(m.Z,{fetchStatus:e,render:()=>h?r.createElement(a.Z,{style:[E.container,d],testID:"simpleTweet"},r.createElement(a.Z,{style:E.tweet},y?r.createElement(l.Z,{onPress:b,renderTimestamp:Z,tweet:h}):r.createElement(p.Z,{onAnalyticsClick:u.Z,onAvatarClick:u.Z,onClick:b,onEntityClick:u.Z,onMediaClick:u.Z,onReplyContextClick:u.Z,tweet:h,withActions:!0})),w):null,renderFailure:()=>r.createElement(a.Z,{style:[E.tombstoneContainer,d],testID:"tombstone"},r.createElement(c.Z,{actionText:"Remove",onActionClick:s,withFooterGap:!1,withHeader:!1,withHorizontalPadding:!1})),retryable:!1})}))},86105:(e,t,n)=>{n.d(t,{V:()=>f,Z:()=>b});var o=n(2784),r=n(41441),a=n(8352),i=n(73228),l=n.n(i),s=n(9082),c=n(7765),d=n(76293),u=n(44895),m=n(58711),p=n(8716),h=n(29022);const g=l().cd343e16,y=l().f47e39e8,f=()=>o.createElement(a.Z,{header:g,imageVariants:m.P.BookInBirdCage,message:y}),b=({bookmarkFolderId:e,history:t,title:n,urtModule:a})=>{const i=o.createElement(c.Z,{history:t}),l=(0,p.Z)(),m=o.useMemo((()=>(0,u.G)({withRemoveFromBookmarks:!0,bookmarkFolderId:e})),[e]);return o.createElement(s.Z,{component:r.Z,fab:i},o.createElement(d.Z,{entryConfiguration:m,module:a,prerollDisplayLocation:h.Nw.OTHER,renderEmptyState:()=>(l.scribeAction("empty"),f()),title:n}))}},81063:(e,t,n)=>{n.r(t),n.d(t,{TwitterArticleScreen:()=>j,default:()=>J,failureMessage:()=>N,sidebarLayoutScreenTitle:()=>K,sidebarModuleText:()=>V});n(6886);var o=n(2784),r=n(25686),a=n(68472),i=n(73186),l=n(73228),s=n.n(l),c=n(35193),d=n(73036),u=n(90876),m=n(44402),p=n(1846),h=(n(85940),n(1503)),g=n(72175),y=n(89884),f=n(34478);const b=({author:e,children:t,twitterArticle:n})=>{var r,a,i,l;const s=(null==(r=n.data)?void 0:r.contentStateJson)||"",c=(null==(a=n.data)?void 0:a.plaintext)||(e=>{try{return(0,h.convertFromRaw)(JSON.parse(e)).getPlainText()}catch(e){return""}})(s),d=c.substr(0,200).replace(/\n/g," "),u=null==(i=n.cover_image)?void 0:i.media_info;let m,p,b;"ApiImage"===(null==u?void 0:u.__typename)&&(m=u.original_img_url,p=u.original_img_width,b=u.original_img_height);const E=(0,y.kc)(n.rest_id),v=null!=(l=n.metadata)&&l.publishedAtMs?new Date(Number(n.metadata.publishedAtMs)):null;return o.createElement(o.Fragment,null,o.createElement(g.ql,{prioritizeSeoTags:!0},o.createElement("meta",{content:n.title,name:"og:title",property:"og:title"})),o.createElement(f.Z,{itemScope:!0,itemType:"https://schema.org/Article"},o.createElement("meta",{content:"Twitter",itemProp:"publisher",property:"og:site_name"}),o.createElement("meta",{content:"true",name:"twitter:article"}),o.createElement("meta",{content:"86400",name:"twitter:maxage"}),o.createElement("meta",{content:"article",property:"og:type"}),o.createElement("meta",{content:n.title,itemProp:"headline"}),o.createElement("meta",{content:d,itemProp:"description",name:"description",property:"og:description"}),o.createElement("meta",{content:e.screen_name,name:"twitter:site",property:"article:author"}),o.createElement("meta",{content:E,itemProp:"url",property:"og:url"}),m&&o.createElement("meta",{content:m,itemProp:"image",name:"og:image",property:"og:image"}),m&&o.createElement("meta",{content:"jpg",property:"og:image:type"}),p&&o.createElement("meta",{content:p,name:"og:image:width",property:"og:image:width"}),b&&o.createElement("meta",{content:b,name:"og:image:height",property:"og:image:height"}),v&&o.createElement("meta",{content:v.toISOString(),itemProp:"datePublished",property:"article:published_time"}),t))};var E=n(43467),v=n(68883),w=n(65285),Z=n(58862),C=n(19313),S=n(5621),k=n(9561),I=n(28377),T=n(45855),_=n(76275),x=n(33988),P=n(29170),M=n(45912),A=n(23803),B=n(23335),L=n(92160),D=n(7990),F=n(57659);const R=(e,t)=>t.match.params.twitterArticleId,z=(e,t)=>{const n=R(0,t);return D.ZP.select(e,n)},H=(e,t)=>{const n=R(0,t);return D.ZP.selectAuthorId(e,n)},O=(e,t)=>{const n=R(0,t);return D.ZP.selectAuthor(e,n)},U=(e,t)=>{const n=((e,t)=>{const n=R(0,t);return D.ZP.selectFetchStatus(e,n)})(e,t),o=((e,t)=>{const n=R(0,t);return D.ZP.selectAuthorFetchStatus(e,n)})(e,t);return(0,A.h1)(n,o)},W=(e,t)=>(0,P.t5)(e,P.OS),$=(0,L.Z)().propsFromState((()=>({author:O,authorId:H,fetchStatus:U,shouldShowEducation:W,twitterArticle:z}))).propsFromActions((()=>({addFlag:P.pj,createLocalApiErrorHandler:(0,B.createLocalApiErrorHandlerWithContextFactory)("TWITTER_ARTICLE_SCREEN"),fetchTwitterArticle:D.ZP.fetchOne,fetchUserIfNeeded:F.ZP.fetchOneIfNeeded}))).withAnalytics({page:"note"}),K=s().c87f3cf8,N=s().h880e4b8,V=s().aaad27c8,G={page:"note"};function j(e){var t;const{addFlag:n,analytics:i,author:l,authorId:s,createLocalApiErrorHandler:h,fetchStatus:g,fetchTwitterArticle:f,fetchUserIfNeeded:x,history:B,match:{params:{twitterArticleId:L}},shouldShowEducation:D,twitterArticle:F}=e,R=L,z=(0,I.Sj)(),{loggedInUserId:H}=o.useContext(C.rC),[O,U]=o.useState(null),[W,$]=o.useState(!1);o.useEffect((function(){F||f(R),s&&!l&&x(s).catch(h())}),[l,s,h,f,x,F,R]);const j=o.useCallback(((e,t)=>{const{is_user_follows_viewer:n=!1,is_viewer_follows_user:o=!1}=l?_.Z.getUserItem(l):{};return{note_details:{author_id:e,is_note_author_follows_viewer:n,is_viewer_follows_note_author:o,note_id:R,session_duration_in_s:t}}}),[l,R]),J=o.useCallback((({action:e,component:t,element:n,sessionDuration:o})=>{if(s){const r=j(s,o);i.scribe({component:t,element:n,action:e,data:r})}}),[i,s,j]);o.useEffect((()=>{const e=Date.now();J({action:"impression"});const t=()=>{const t=Math.floor((Date.now()-e)/1e3);J({action:"end_session",sessionDuration:t})};return window.addEventListener("beforeunload",t),()=>{t(),window.removeEventListener("beforeunload",t)}}),[s]),o.useEffect((()=>{const e=z.addScrollListener((0,c.Z)((()=>{var e;const t=z.scrollY(),n=z.getRect2D().height,o=null==O||null==(e=O.getViewport())?void 0:e.clientHeight;o&&t+n>=.95*o&&!W&&(J({action:"reached_end"}),$(!0)),J({action:"scroll"})}),1e3));return()=>{e()}}),[z,J,W,O]);const Q=({action:e,component:t,element:n})=>{J({action:e,component:t,element:n})},X=()=>{n(P.OS)},Y=(null==F||null==(t=F.metadata)?void 0:t.visibility)===M.fk.PUBLISHED,ee=H===s,te=()=>F&&l?o.createElement(r.Z,null,Y||ee?o.createElement(r.Z,{testID:"twitterArticleView"},o.createElement(b,{author:l,twitterArticle:F},o.createElement(v.ZP,{author:l,onLearnMoreCalloutImpression:X,onScribeEvent:Q,shouldShowLearnMoreCallout:D,twitterArticle:F}))):o.createElement(S.Z,null)):null,ne=Y?o.createElement(k.Z,{source:M.C0.TWITTER_ARTICLE_VIEW,twitterArticleId:R}):ee?o.createElement(w.f,{isPublished:!1}):null,oe=s?o.createElement(r.Z,{style:q.sidebar},o.createElement(r.Z,{style:q.module},o.createElement(p.Z,{headerText:V,participantIds:[s]})),o.createElement(m.Z,{textColor:"gray700",withOverflow:!0})):o.createElement(u.Z,null),re=d.ZP.isMobileOS(),ae=!!d.ZP.getTwitterAppVersion();return o.createElement(T.nO,{data:s?j(s):void 0,namespace:G},o.createElement(E.Z,{backLocation:"/",composeOptions:{defaultText:(0,y.kc)(R)},documentTitle:null==F?void 0:F.title,headerless:ae,hideLoginSignupBar:re,history:B,primaryContent:()=>{const e=g===A.ZP.FAILED;return o.createElement(Z.Z,{onViewportSet:U,style:[q.container,e&&q.failureView]},o.createElement(a.Z,{failureMessage:N,fetchStatus:g,render:te,retryable:!1}))},rightControl:ne,sidebarContent:oe,title:K}))}const q=i.Z.create((e=>({container:{borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small,color:e.colors.text},failureView:{paddingHorizontal:e.spaces.space36,paddingVertical:e.spaces.space28},module:{backgroundColor:e.colors.cellBackground,borderWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid",borderRadius:e.borderRadii.xLarge,marginBottom:e.spaces.space16,overflow:"hidden"},sidebar:{paddingBottom:e.spaces.space64,paddingTop:e.spaces.space12}}))),J=$((0,x.Z)(j))},64933:(e,t,n)=>{n.r(t),n.d(t,{TabbedMediaEditScreen:()=>p,default:()=>h});var o=n(7896),r=(n(85940),n(2784)),a=n(4495),i=n(89884),l=n(92160),s=n(18255);const c=(e,t)=>{var n,o;return null==(n=t.location)||null==(o=n.state)?void 0:o.twitterArticleId},d=(e,t)=>{var n,o;return null==(n=t.location)||null==(o=n.state)?void 0:o.mediaId},u=(e,t)=>{var n;const o=d(0,t);return o?[null==(n=(0,s.m3)(e,o))?void 0:n[0]]:[]},m=(0,l.Z)().propsFromState((()=>({media:u,initialMediaId:d,twitterArticleId:c}))).propsFromActions((()=>({setMediaMetadata:s._B,processMedia:s.C4,updateMediaUpload:s._J}))).withAnalytics({page:"tabbed_media_twitter_article"}),p=e=>{const{history:t,initialMediaId:n,match:l,media:s,staticContext:c,twitterArticleId:d,...u}=e;return s.length<=0||!n?(d?t.replace((0,i.F5)(d)):t.replace(i.xd),null):r.createElement(a.Z,(0,o.Z)({},u,{history:t,initialMediaId:n,media:s,sensitiveMediaTabEnabled:!1}))},h=m(p)},1860:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Eo});n(6886),n(21515),n(36728),n(85940);var o=n(2784),r=n(1503),a=n(70313),i=n.n(a),l=n(14983),s=n.n(l),c=n(76648),d=n(94407),u=n(25686),m=n(36934),p=n(12934),h=n(29496),g=n(85682),y=n(68472),f=n(22150),b=n(19179),E=n(44173),v=n(10013),w=n(4642),Z=n(54044),C=n(20900),S=n(73186),k=n(95995),I=n(59326),T=n(2098),_=n(28674),x=n(35193),P=n(32307),M=n(70151),A=n(1206),B=n(86660),L=n(73036),D=n(68767),F=n(292),R=n(11722),z=n(69362),H=n(68883),O=n(7896),U=n(35131),W=n(17500),$=n(62705),K=n(90867),N=n(47367),V=n.n(N),G=n(44487),j=n(7093),q=n(41441),J=n(73228),Q=n.n(J),X=n(49461),Y=n(51276),ee=n(94836),te=n(31165),ne=n(78705),oe=n(73206);const re=S.Z.create((e=>({sheet:{maxHeight:"100vh"},appBar:{borderRadius:e.borderRadii.xLarge,overflow:"hidden"},buttonContainer:{flexDirection:"row-reverse"},secondaryButton:{marginEnd:e.spaces.space8},content:{flex:1,overflowY:"auto"},popoverContent:{padding:e.spaces.space20}}))),ae=({children:e,onBackClick:t,onClose:n,primaryButtonConfig:r,secondaryButtonConfig:a,style:i,title:l,withPassthroughEvents:s})=>{const[c,d]=o.useState(!1),p=()=>{g(),null==r||r.onClick(g)},g=()=>{d((e=>!e))},y=o.createElement(te.Z,{backButtonType:t?"back":"close",onClick:t||n}),f=a?o.createElement(h.ZP,{accessibilityLabel:a.label,onClick:()=>{null==a||a.onClick()},size:"small",style:re.secondaryButton,type:a.type||"primaryOutlined"},a.label):null,b=o.createElement(u.Z,{style:re.buttonContainer},(()=>{if(r){const{forceDisabled:t,label:n,popoverMessage:a,type:i}=r,l=o.createElement(h.ZP,{accessibilityLabel:n,disabled:c||t,onClick:p,size:"small",type:i||"primaryFilled"},n);return a?o.createElement(w.Z,{enableHover:!0,renderContent:(e=a,()=>o.createElement(m.ZP,{style:re.popoverContent},e)),withArrow:!0},l):l}return null;var e})(),f);return o.createElement(oe.Z,{enableMaskForDismiss:!0,onMaskClick:n,style:[re.sheet,i],type:"full",withKeyboardNavigation:!0,withMask:!0,withPassthroughEvents:s},o.createElement(ne.Z,{leftControl:y,rightControl:b,style:re.appBar,title:l}),o.createElement(u.Z,{style:re.content},e))},ie=Q().fee0a8bc;class le extends o.Component{constructor(e){super(e),this._render=()=>{const{fields:e}=this.props,{fieldValues:t}=this.state;return o.createElement(o.Fragment,null,(0,Y.Z)(e).map((([e,n])=>{const{getErrorText:r,initialValue:a,numberOfLines:i,...l}=n,s=null==r?void 0:r(t[e]);return o.createElement(ee.Z,(0,O.Z)({errorText:s,invalid:!!s,key:e,multiline:!!i&&i>1,name:e,numberOfLines:i,onChange:this._handleFieldChanged(e),value:t[e]||""},l))})))},this._handleFieldChanged=e=>t=>{const{fieldValues:n}=this.state,o={...n,[e]:t.target.value};this.setState({fieldValues:o})},this._handleSave=e=>{const{onSave:t}=this.props,{fieldValues:n}=this.state;t(n,e)},this._isSaveEnabled=()=>{const{fields:e,isSaveDisabled:t}=this.props,{fieldValues:n}=this.state,o=(0,Y.Z)(n),r=o.some((([t,n])=>n!==e[t].initialValue)),a=o.some((([t,n])=>e[t].validLength&&n.length>e[t].validLength)),i=o.some((([t,n])=>{var o,r;return!(null==(o=(r=e[t]).getErrorText)||!o.call(r,n))}));return r&&!a&&!i&&!(t&&t(n))},this.state={fieldValues:(0,X.Z)(e.fields,(e=>e.initialValue))}}render(){const{buttonLabelOverride:e,onClose:t,sheetTitle:n}=this.props;return o.createElement(ae,{onClose:t,primaryButtonConfig:{label:e||ie,forceDisabled:!this._isSaveEnabled(),onClick:this._handleSave},title:n},this._render())}}var se=n(11839),ce=n(86800),de=n(61134),ue=n(2753),me=n(89835),pe=n(71919),he=n(88315);const ge=S.Z.create((e=>({separator:{borderEndWidth:e.borderWidths.small,borderColor:e.colors.gray200,marginVertical:e.spaces.space8}}))),ye=({style:e})=>o.createElement(u.Z,{style:[ge.separator,e]});class fe extends o.Component{constructor(e){super(e),this.isPopoverShown=!1,this._setDecorator=()=>{const{onChange:e,richTextInputContext:{editorState:t}}=this.props;if(e&&t){e(r.EditorState.set(t,{decorator:this.decorator}))}},this._keyBindingFn=e=>{const{keyBindingFn:t}=this.props,n=r.KeyBindingUtil.hasCommandModifier(e),o=e.shiftKey&&n,a=e.key.toLowerCase();return"k"===a&&n?he.Qm.toLowerCase():"x"===a&&o?he.fR.strikethrough.toLowerCase():"7"===a&&o?he.P7.numbered:"8"===a&&o?he.P7.bulleted:"9"===a&&o?he.P7.blockquote:"."===a&&o?he.u4:","===a&&o?he.db:null==t?void 0:t(e)},this._isEditorFocused=()=>{const{richTextInputContext:{editorState:e}}=this.props;return null==e?void 0:e.getSelection().getHasFocus()},this._shouldShowPlaceholder=()=>{const{richTextInputContext:{editorState:e}}=this.props,t=null==e?void 0:e.getCurrentContent(),n=null==t?void 0:t.getBlockMap().first().getType(),o=n===he.P7.bulleted||n===he.P7.numbered||n===he.P7.blockquote;return!this._isEditorFocused()&&!o},this._getBackspaceAndDeleteCommandHandlers=()=>{const{onChange:e,richTextInputContext:{editorState:t}}=this.props;if(t&&e){const n=n=>{const o=n(t);return o?()=>e(o):void 0},o=(e,t)=>t?Object.fromEntries(e.map((e=>[e,t]))):{};return{...o(he.wX,n(r.RichUtils.onBackspace)),...o(he.Ak,n(r.RichUtils.onDelete))}}return{}},this._getEditorStateWithLinkSelected=e=>{const t=this._getSelectedEntityWithRange();if(t){const{end:n,entity:o,start:r}=t,a=o.getData().url;if(a)return{editorStateWithLinkSelected:this._getEditorStateWithTextSelection(e,r,n),entityUrl:a}}return{editorStateWithLinkSelected:e,entityUrl:void 0}},this._getEditorStateWithTextSelection=(e,t,n)=>{const o=e.getSelection(),a=o.merge(o.getIsBackward()?{anchorOffset:n,focusOffset:t}:{anchorOffset:t,focusOffset:n});return r.EditorState.acceptSelection(e,a)},this._getSelectedText=e=>{const t=e.getSelection(),n=e.getCurrentContent(),o=t.getStartKey();if(o===t.getEndKey()){const e=n.getBlockForKey(o),r=t.getStartOffset(),a=t.getEndOffset();return e.getText().slice(r,a)||""}},this._getSelectedEntityWithRange=()=>{const{richTextInputContext:{editorState:e}}=this.props;if(e){const t=e.getSelection(),n=e.getCurrentContent(),o=t.getAnchorKey(),r=n.getBlockForKey(o),a=r.getEntityAt(t.getAnchorOffset()),i=r.getEntityAt(t.getFocusOffset());if(a&&a===i){const e=r.getCharacterList().toArray(),t=e=>(null==e?void 0:e.getEntity())===a;return{start:(0,W.Z)(e,t),end:(0,$.Z)(e,t)+1,entity:n.getEntity(a)}}}},this._getSelectedTextSize=()=>{const{richTextInputContext:{editorState:e}}=this.props,t=e?r.RichUtils.getCurrentBlockType(e):void 0;return he.iH.find((e=>e.blockType===t))||he.Tr},this._toggleTextStyle=e=>{const{onChange:t,richTextInputContext:{editorState:n}}=this.props;return o=>()=>{n&&(null==t||t(e(n,o)))}},this._handleChangeTextSize=e=>{this._toggleTextStyle(r.RichUtils.toggleBlockType)(e.blockType)()},this._handleIncreaseTextSize=()=>{const e=this._getSelectedTextSize(),t=he.iH.indexOf(e);if(0!==t){const e=he.iH[t-1];this._handleChangeTextSize(e)}},this._handleDecreaseTextSize=()=>{const e=this._getSelectedTextSize(),t=he.iH.indexOf(e);if(t!==he.iH.length-1){const e=he.iH[t+1];this._handleChangeTextSize(e)}},this._handleHideTextSizeMenu=()=>{this.setState({showTextSizeMenu:!1})},this._handleShowTextSizeMenu=()=>{this.setState({showTextSizeMenu:!0})},this._handleToggleLinkSheet=()=>{const{showLinkSheet:e}=this.state;this.setState({showLinkSheet:!e})},this._handleAddLink=(e,t)=>({source:n,text:o})=>{const{onChange:a}=this.props;if(a&&n){const i=e.getSelection(),l=t?r.EditorState.push(e,r.Modifier.replaceText(e.getCurrentContent(),i,o||n),"insert-characters"):e,s=l.getSelection(),c=this._getEditorStateWithTextSelection(l,i.getStartOffset(),s.getEndOffset()),d=c.getCurrentContent().createEntity(he.Qm,"MUTABLE",{url:this._getUrlWithProtocol(n)}).getLastCreatedEntityKey();a(r.EditorState.forceSelection(r.RichUtils.toggleLink(c,c.getSelection(),d),s))}this._handleToggleLinkSheet()},this._handleRemoveLink=()=>{const{onChange:e,richTextInputContext:{editorState:t}}=this.props;if(e&&t){const{editorStateWithLinkSelected:n}=this._getEditorStateWithLinkSelected(t);e(r.RichUtils.toggleLink(n,n.getSelection(),null))}},this._handleLinkPopoverOpen=()=>{this.isPopoverShown=!0},this._handleLinkPopoverClose=()=>{this.isPopoverShown=!1},this._handleReturn=e=>{const{handleReturn:t,onChange:n,richTextInputContext:{editorState:o}}=this.props;if(n&&o){if(r.KeyBindingUtil.isSoftNewlineEvent(e)){return n(r.RichUtils.insertSoftNewline(o)),"handled"}const t=o.getSelection(),a=o.getCurrentContent(),i=t.getStartKey(),l=i===t.getEndKey()?a.getBlockForKey(i):void 0;if((null==l?void 0:l.getType())===he.P7.blockquote&&0===(null==l?void 0:l.getLength())){return n(r.RichUtils.toggleBlockType(o,he.P7.blockquote)),"handled"}}return(null==t?void 0:t(e))||"not-handled"},this._handleOnChange=e=>{const{onChange:t}=this.props;if(t){t("insert-fragment"===e.getLastChangeType()?this._removeInvalidStyles(e):e)}},this._removeInvalidStyles=e=>{const t=e.getCurrentContent(),n=t.getBlockMap(),o=n.map(this._removeInvalidStylesFromContentBlock),a=t.merge({blockMap:n.merge(o)});return r.EditorState.push(e,a,"change-block-data")},this._removeInvalidStylesFromContentBlock=e=>{const t=[...(0,K.Z)(he.fR),...(0,K.Z)(he.P7)],n=e.getCharacterList().map((e=>e.getStyle().filter((e=>!(null!=t&&t.includes(e)))).reduce(((e,t)=>r.CharacterMetadata.removeStyle(e,t)),e)));return(null!=t&&t.includes(e.getType())?e:e.set("type","unstyled")).set("characterList",n)},this._getUrlWithProtocol=e=>e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`,this._getSourceInputErrorText=e=>e?V()(e,!1,!1)?void 0:"Wait! Something’s incorrect with this URL. Please check the spelling and formatting of this link.":"Please fill out this field",this._renderToolbarButtonGroup=(e,t)=>{const{richTextInputContext:{editorState:n}}=this.props,a=null==n?void 0:n.getCurrentInlineStyle(),i=n?r.RichUtils.getCurrentBlockType(n):void 0;return o.createElement(u.Z,{style:be.buttonGroup},t?null:o.createElement(ye,{style:be.separatorMargin}),e.map(((e,t)=>{const{Icon:n,key:r,...l}=e,s=this._isEditorFocused()&&(null==a?void 0:a.contains(r)),c=this._isEditorFocused()&&r===i,d=r===he.Qm&&this.isPopoverShown,u=s||c||d,m=o.createElement(n,{style:u?void 0:be.iconGray});return o.createElement(h.ZP,(0,O.Z)({icon:m,key:r,preventFocusShift:this._isEditorFocused(),size:"small",type:u?"brandText":"primaryText"},l))})))},this._renderTextSizeMenu=()=>{const e=this._getSelectedTextSize(),t=he.iH.map((t=>({isSelected:e===t,onClick:()=>this._handleChangeTextSize(t),selectable:!0,text:t.component})));return o.createElement(G.Z,{items:t,onCloseRequested:this._handleHideTextSizeMenu,preventFocusShift:this._isEditorFocused(),shouldCloseOnClick:!0})},this._renderLinkPopoverContent=(e,t)=>n=>{const r={external:!0,openInSameFrame:!1,pathname:t};return o.createElement(u.Z,{style:be.linkPopoverContent},o.createElement(m.ZP,{numberOfLines:2,style:be.bottomMargin,weight:"bold"},e),o.createElement(pe.Z,{link:r,style:be.bottomMargin},t),o.createElement(u.Z,{style:be.linkPopoverButtons},o.createElement(h.ZP,{onPress:()=>{n(),this._handleToggleLinkSheet()},type:"primaryFilled"},"Edit"),o.createElement(h.ZP,{onPress:()=>{n(),this._handleRemoveLink()},style:be.removeLinkButtonMargin},"Remove")))},this._renderLinkSheet=()=>{const{richTextInputContext:{editorState:e}}=this.props;if(e){const{editorStateWithLinkSelected:t,entityUrl:n}=this._getEditorStateWithLinkSelected(e),r=this._getSelectedText(t);return o.createElement(le,{buttonLabelOverride:n?"Save":"Insert",fields:{source:{label:"URL",initialValue:n||"",getErrorText:this._getSourceInputErrorText},...void 0!==r?{text:{label:"Text to display",initialValue:r}}:{}},onClose:this._handleToggleLinkSheet,onSave:this._handleAddLink(t,void 0!==r),sheetTitle:n?"Edit link":"Insert link"})}},this._setFieldTextInputRef=e=>{this.fieldTextInput=e},this.state={showLinkSheet:!1,showTextSizeMenu:!1},this.decorator=new r.CompositeDecorator([(0,me.U_)(this._renderLinkPopoverContent,this._handleLinkPopoverOpen,this._handleLinkPopoverClose),(0,me.NA)(),me.aF,me.RU])}componentDidMount(){this._setDecorator(),ue.fH(de.c,de.n)}componentDidUpdate(){const{richTextInputContext:{editorState:e}}=this.props;e&&e.getDecorator()!==this.decorator&&this._setDecorator()}render(){const{additionalToolbarButtonConfigs:e,inputStyle:t,keyCommandHandlers:n,middleControl:a,onChange:i,placeholder:l,richTextInputContext:s,toolbarRightControl:c,...d}=this.props,{showLinkSheet:p,showTextSizeMenu:g}=this.state,y=(0,he.b$)(this._toggleTextStyle(r.RichUtils.toggleInlineStyle)),b=(0,he.QF)(this._toggleTextStyle(r.RichUtils.toggleBlockType)),E=(0,he.lD)(this._toggleTextStyle(r.RichUtils.toggleBlockType)),v=(0,he.KJ)(this._handleToggleLinkSheet),w=this._getSelectedTextSize(),Z={...s,blockStyleFn:(0,he.su)(!1,s.blockStyleFn),stripPastedStyles:!1},C={...Object.fromEntries([...y,...v,...E,...b].map((e=>[e.key.toLowerCase(),e.onPress]))),...{[he.u4]:this._handleIncreaseTextSize,[he.db]:this._handleDecreaseTextSize},...this._getBackspaceAndDeleteCommandHandlers()},k=n?{...C,...n}:C,I=this._handleOnChange,T=j.Z.hexToCss(S.Z.theme.colors.navigationBackground,0),_=j.Z.hexToCss(S.Z.theme.colors.navigationBackground,1);return o.createElement(o.Fragment,null,o.createElement(u.Z,{style:be.toolbar_container},p?this._renderLinkSheet():null,o.createElement(u.Z,{style:be.toolbar},ve,o.createElement(u.Z,{nativeID:"toolbar-styling-buttons",style:be.toolbar_styling_buttons},this._renderToolbarButtonGroup(y,!0),o.createElement(ye,{style:be.separatorMargin}),o.createElement(se.Z,{interactiveStyles:null,onClick:this._handleShowTextSizeMenu,preventFocusShift:this._isEditorFocused(),style:be.textSizeSelection},(e=>o.createElement(o.Fragment,null,o.createElement(m.ZP,{color:"gray700",numberOfLines:1,size:"subtext1"},w.label),o.createElement(h.ZP,{icon:Ee,interactivityState:e,size:"small",type:"primaryText"}),g?this._renderTextSizeMenu():null))),this._renderToolbarButtonGroup(b),this._renderToolbarButtonGroup(E),this._renderToolbarButtonGroup(v),e?this._renderToolbarButtonGroup(e):null),o.createElement(u.Z,{style:be.toolbar_right_control},c,o.createElement(ce.Z,{angle:90,angleUnit:"deg",colors:[T,_,_],locations:[0,.75,1],style:be.toolbar_styling_buttons_fadeout_right}))),o.createElement(ce.Z,{angle:270,angleUnit:"deg",colors:[T,_,_],locations:[0,.75,1],style:be.toolbar_styling_buttons_fadeout_left})),o.createElement(q.Z,null,a,o.createElement(f.Z,(0,O.Z)({handleReturn:this._handleReturn,inputStyle:[be.input,t],keyBindingFn:this._keyBindingFn,keyCommandHandlers:k,onChange:I,placeholder:this._shouldShowPlaceholder()?l:void 0,ref:this._setFieldTextInputRef,richTextInputContext:Z},d))))}focus(){var e;null==(e=this.fieldTextInput)||e.focus()}getTextInputHeight(){var e;return null==(e=this.fieldTextInput)?void 0:e.getTextInputHeight()}}fe.defaultProps={leftAligned:!0,multiline:!0,styleType:"selection"};const be=S.Z.create((e=>{const t=e.componentZIndices.appBarZIndex,n={position:"absolute",width:e.spacesPx.space48,height:"100%",pointerEvents:"none"};return{bottomMargin:{marginBottom:e.spaces.space8},buttonGroup:{flexDirection:"row"},iconGray:{color:e.colors.gray700},input:{paddingHorizontal:0,paddingBottom:0},linkPopoverButtons:{flexDirection:"row",marginTop:e.spaces.space8},linkPopoverContent:{marginHorizontal:e.spaces.space24,marginVertical:e.spaces.space24},removeLinkButtonMargin:{marginStart:e.spaces.space8},separatorMargin:{marginHorizontal:`calc(${e.spaces.space4} + ${e.spaces.space2})`},textSizeSelection:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",marginStart:e.spaces.space8,marginEnd:e.spaces.space4,width:`calc(${e.spaces.space80} + ${e.spaces.space32})`},toolbar_container:{zIndex:t,position:"sticky",top:e.componentDimensions.appBarHeightPx-.5},toolbar:{backgroundColor:e.colors.cellBackground,borderBottomWidth:e.borderWidths.small,borderColor:e.colors.borderColor,flexDirection:"row",justifyContent:"space-between",width:"100%",paddingBottom:e.spaces.space4},toolbar_styling_buttons:{flex:1,flexDirection:"row",paddingStart:e.spaces.space8,paddingEnd:e.spaces.space48,overflowX:"auto",overscrollBehavior:"contain",WebkitOverflowScrolling:"touch",scrollbarWidth:"none"},toolbar_styling_buttons_fadeout_right:{...n,start:-1*n.width},toolbar_styling_buttons_fadeout_left:{...n,start:0,width:e.spacesPx.space16,zIndex:t+1},toolbar_right_control:{flexShrink:1,flexDirection:"row",alignItems:"center",paddingEnd:e.spaces.space16}}})),Ee=o.createElement(U.default,{style:be.iconGray}),ve=o.createElement("style",null,"\n    #toolbar-styling-buttons *::-webkit-scrollbar {\n      display: none;\n    }\n  ");var we=n(16259),Ze=n(45784),Ce=n(11469),Se=n(65625),ke=n(88027),Ie=n(96797),Te=n(74581),_e=n(82939),xe=n(85204),Pe=n(22685),Me=n(8443),Ae=n(65249),Be=n(23803),Le=n(23335),De=n(92160),Fe=n(30102);const Re=(e,t)=>{const{tweetId:n}=t;return n?Fe.ZP.selectHydrated(e,n):void 0},ze=(e,t)=>{const{tweetId:n}=t;return n?Fe.ZP.selectFetchStatus(e,n):void 0},He=(0,De.Z)().propsFromState((()=>({tweet:Re,tweetFetchStatus:ze}))).propsFromActions((()=>({createLocalApiErrorHandler:(0,Le.createLocalApiErrorHandlerWithContextFactory)("TWEET_BY_URL"),fetchTweetIfNeeded:Fe.ZP.fetchOneIfNeeded})));var Oe=n(15956);const Ue=Q().jd2f69a8,We=Q().d2ae33ce,$e=Q().ac308436,Ke=S.Z.create((e=>({activityIndicatorWrapper:{alignItems:"center",marginHorizontal:e.componentDimensions.gutterHorizontal,marginBottom:e.componentDimensions.gutterVertical,padding:e.spaces.space12}}))),Ne=He((({checkTweet:e,createLocalApiErrorHandler:t,fetchTweetIfNeeded:n,inputStyle:r,onChangeTweetId:a,tweet:i,tweetFetchStatus:l,tweetId:s,withActivityIndicator:c})=>{const[d,m]=o.useState(),p=o.useMemo((()=>(0,x.Z)((e=>{e&&n(e).catch(t(Ae.c))}),250)),[t,n]);o.useEffect((()=>{p(s)}),[p,s]),o.useEffect((()=>{if(i){const t=null==e?void 0:e(i);t&&(m(t),a(void 0))}else l===Be.ZP.FAILED&&m($e)}),[e,a,i,l]);return o.createElement(o.Fragment,null,o.createElement(ee.Z,{errorText:d,invalid:!!d,label:Ue,name:"TweetByUrlInput",onChange:e=>{m(void 0);const t=e.target.value,n=(e=>{if(/^\d+$/.test(e))return e;const t=/status\/(\d+)/g.exec(e)||[];return(0,Oe.Z)(t)})(t);n?a(n):t?m(We):a(void 0)},style:r}),c&&l===Be.ZP.LOADING?o.createElement(u.Z,{style:Ke.activityIndicatorWrapper},o.createElement(Me.Z,{size:"large"})):null)}));var Ve=n(65502);const Ge=(e,t)=>{const{tweetId:n}=t;return n?Fe.ZP.selectHydrated(e,n):void 0},je=(0,De.Z)().propsFromState((()=>({tweet:Ge}))),qe=(Q().ac78ac54,S.Z.create((e=>({tweet:{backgroundColor:e.colors.cellBackground,borderWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid",borderRadius:e.borderRadii.xLarge,marginBottom:e.componentDimensions.gutterVertical,marginHorizontal:e.componentDimensions.gutterHorizontal}})))),Je=je((({onTweetPress:e,style:t,tweet:n,tweetId:r})=>{if(!n)return null;const a=o.createElement(Ve.Z,{tweet:n});if(!e)return a;return o.createElement(se.Z,{onPress:t=>{r&&e(r)},style:[qe.tweet,t]},a)})),Qe=({checkTweet:e,inputStyle:t,onChangeTweetId:n,onTweetPress:r,tweetPreviewStyle:a})=>{const[i,l]=o.useState();return o.createElement(o.Fragment,null,o.createElement(Ne,{checkTweet:e,inputStyle:t,onChangeTweetId:e=>{l(e),n&&n(e)},tweetId:i,withActivityIndicator:!0}),o.createElement(Je,{onTweetPress:e=>{r&&i&&r(i)},style:a,tweetId:i}))};var Xe=n(50640),Ye=n(20901),et=n(86105),tt=n(65566),nt=n(76293),ot=n(57659);const rt=(0,De.Z)().propsFromState((()=>({loggedInUser:ot.ZP.selectLoggedInUser})));var at=n(44895),it=n(52612),lt=n(37985),st=n(76831);const ct=(0,at.G)({}),dt=({bookmarkFolderId:e,handleTweetClick:t})=>({...ct,[it.ZP.Tweet]:{...ct[it.ZP.Tweet],bookmarkFolderId:e,handlers:{...ct[it.ZP.Tweet].handlers,[lt.Z.Tweet]:(0,st.d2)({onClick:t,withSelectIcon:!1})}}}),ut="likedTweets",mt=[{label:"Liked tweets",value:ut},{label:"Bookmarked tweets",value:"bookmarkedTweets"}],pt=S.Z.create((e=>({selector:{marginBottom:e.spaces.space12},tweetInput:{marginTop:e.spaces.space12,paddingHorizontal:0,paddingVertical:0},tweetPreview:{marginTop:e.spaces.space12,marginBottom:0,marginHorizontal:0}}))),ht=rt((({loggedInUser:e,onAddTweets:t,onBookmarkFolderPress:n,selectedBookmarkFolderId:r})=>{const a="string"==typeof r,[i,l]=o.useState(ut),s=o.useCallback((e=>t([e])),[t]),c=o.useMemo((()=>dt(a?{handleTweetClick:s,bookmarkFolderId:r}:{handleTweetClick:s})),[a,s,r]),d=null==e?void 0:e.id_str,u=o.useMemo((()=>d?(0,Ye.Z)(d):void 0),[d]);if(a&&r){const e="all"===r?Xe.ZP:(0,Xe.m)(r);return o.createElement(nt.Z,{entryConfiguration:c,module:e,renderEmptyState:et.V,title:"Bookmarked"})}return u?o.createElement(o.Fragment,null,o.createElement(Qe,{checkTweet:e=>{var t;return null!=(t=e.user)&&t.protected?"Tweets from protected accounts can’t be used":Pe.Z.isQuotedTweetUnavailable(e)?"Quote Tweets of a deleted Tweet can’t be used":void 0},inputStyle:pt.tweetInput,onTweetPress:e=>{t([e])},tweetPreviewStyle:pt.tweetPreview}),o.createElement(g.Z,{spacing:"space12"}),o.createElement(xe.ZP,{label:"Show",onChange:e=>{l(e)},options:mt,style:pt.selector,value:i}),i===ut?o.createElement(nt.Z,{entryConfiguration:c,module:u,title:"Liked"}):o.createElement(tt.ZP,{onFolderPress:n})):null}));var gt=n(90783),yt=n(58862),ft=n(54170),bt=n(12530),Et=n(50148),vt=n(97442),wt=n(43398),Zt=n(63142),Ct=n(73606),St=n(24433),kt=n(71570);const It=(e,t)=>{const{shouldAutoPlayGif:n}=(0,St.l4)(e),o=(0,kt.AP)(e);return(n||(0,Ct.Z)(o))&&!Zt.Z.reducedMotionEnabled},Tt=(0,De.Z)().propsFromState((()=>({isDataSaverEnabled:St.IX,shouldAutoPlayGif:It}))),_t=Q().a50ba822,xt=Q().a9ae1e78,Pt=S.Z.create((e=>({searchContainer:{alignItems:"center",flex:1,flexDirection:"row",marginVertical:e.spaces.space8},searchInput:{height:"100%"},searchButton:{marginStart:e.spaces.space12}}))),Mt=Tt((e=>{const{isDataSaverEnabled:t,onAddGif:n,shouldAutoPlayGif:r}=e,[a,i]=o.useState(null),[l,s]=o.useState(""),[c,d]=o.useState(!0),[m,p]=o.useState(""),g=!t,y=e=>{i(e),p(e.display_name)},b=()=>{E(m)},E=o.useCallback((e=>{i(null),s(e)}),[]),v=o.useMemo((()=>(0,x.Z)(E,bt.zH)),[E]),w=o.createElement(u.Z,{style:Pt.searchContainer},o.createElement(f.Z,{Icon:ft.default,autoFocus:!0,key:l,onChange:e=>{const{value:t}=e.currentTarget;p(t),g?v(t):d(!t)},onClear:()=>{p(""),i(null),s(""),d(!0)},onSubmitEditing:b,placeholder:_t,style:Pt.searchInput,value:m,withClearButton:!0}),g?null:o.createElement(h.ZP,{accessibilityLabel:xt,disabled:c,onPress:b,size:"small",style:Pt.searchButton,type:"brandFilled"},xt));let Z;return Z=l?o.createElement(wt.Z,{gifSearchKey:bt.AD.NoteComposition,onClickGif:n,query:l,shouldAutoPlayGif:r}):a?o.createElement(vt.Z,{category:a,gifSearchKey:bt.AD.NoteComposition,onClickGif:n,shouldAutoPlayGif:r}):o.createElement(Et.ZP,{gifSearchKey:bt.AD.NoteComposition,onClickCategory:y}),o.createElement(u.Z,null,w,Z)})),At=Object.freeze({MEDIA:"Media",GIFS:"GIFs",TWEETS:"Tweets"}),Bt=S.Z.create((e=>({sheet:{minHeight:"40vh",maxHeight:"70vh"},tweetOrGifScreen:{height:"70vh"},container:{paddingBottom:e.spaces.space16,paddingHorizontal:e.spaces.space16},mediaPickerMaskStyle:{backgroundColor:e.colors.gray50,borderRadius:e.borderRadii.medium},tabs:{borderBottomColor:"transparent"},viewport:{borderBottomStartRadius:e.borderRadii.xLarge,borderBottomEndRadius:e.borderRadii.xLarge,flexGrow:1,flexShrink:1,overflow:"auto"}}))),Lt=o.createElement(p.Z,{ratio:S.Z.theme.aspectRatios.landscape}),Dt=o.createElement(Te.default,null),Ft=e=>{const{location:t,onAddGif:n,onAddMedia:r,onAddTweets:a,onClose:i}=e,[l,s]=o.useState(At.MEDIA),[c,d]=o.useState(null),u=e=>()=>l===e,m=(0,K.Z)(At).map((e=>({key:e,label:e,isActive:u(e),to:t.pathname,onClick:()=>s(e)}))),p=e=>{d(e)},h=!!c,g={...h?{onBackClick:()=>{d(null)}}:{}},y=[Bt.sheet,(l===At.GIFS||l===At.TWEETS)&&Bt.tweetOrGifScreen];return o.createElement(ae,(0,O.Z)({onClose:i,style:y,title:"Insert"},g),o.createElement(yt.Z,{style:[Bt.container,Bt.viewport]},h?null:o.createElement(Ie.Z,{links:m,style:Bt.tabs}),(()=>{switch(l){case At.MEDIA:return o.createElement(gt.Z,{acceptGifs:!0,acceptVideo:!0,borderRadius:_e.A.MEDIUM,currentContent:Lt,description:"Choose a file or drag it here\nPlease choose either 1 GIF, 1 Video or up to 4 photos",icon:Dt,maskStyle:Bt.mediaPickerMaskStyle,multiple:!0,onAddMediaFiles:r,withDragDrop:!0});case At.GIFS:return o.createElement(Mt,{onAddGif:n});case At.TWEETS:return o.createElement(ht,{onAddTweets:a,onBookmarkFolderPress:p,selectedBookmarkFolderId:c});default:return null}})()))};var Rt=n(85341),zt=n(26318),Ht=n(45912),Ot=n(65221),Ut=n(9352);const Wt=(e,t,n)=>{const o=Nt(e,$t(e)),a=r.AtomicBlockUtils.insertAtomicBlock(o,t,n),i=Kt(a,t);if(i){const e=a.getCurrentContent().getBlockBefore(i),t=a.getCurrentContent().getBlockAfter(i),n=(null==t?void 0:t.getKey())===a.getCurrentContent().getLastBlock().getKey(),o=null!=e&&e.getText()?a:Qt(a,null==e?void 0:e.getKey()),r=n?o:Qt(o,null==t?void 0:t.getKey()),l=r.getCurrentContent().getBlockAfter(i);return Nt(r,l)}return a},$t=e=>{const t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey())},Kt=(e,t)=>{const n=e.getCurrentContent().getBlocksAsArray().find((e=>e.getCharacterList().some((e=>e.getEntity()===t))));return null==n?void 0:n.getKey()},Nt=(e,t)=>{if(!t)return e;const n=t.getKey(),o=t.getText().length,a=new r.SelectionState({anchorKey:n,anchorOffset:o,focusKey:n,focusOffset:o,hasFocus:!0,isBackward:!1});return r.EditorState.acceptSelection(e,a)},Vt=e=>e.getCurrentContent().getPlainText(),Gt=e=>e.getPlainText().trim(),jt=e=>Vt(e).split(/\s+/).filter((e=>!!e)).length,qt=(e,t)=>{const n=e.getCurrentContent().createEntity(Ht.DC.TWEET,Ht.pc.IMMUTABLE,{tweetId:t}),o=n.getLastCreatedEntityKey(),a=r.EditorState.set(e,{currentContent:n});return Wt(a,o," ")},Jt=e=>{var t,n;return null!=(t=e.mediaFile)&&t.isImage?Ht._e.IMAGE:null!=(n=e.mediaFile)&&n.isVideo?Ht._e.VIDEO:Ht._e.GIF},Qt=(e,t)=>{if(!t)return e;const n=e.getCurrentContent(),o=n.getBlockAfter(t),a=n.getBlockMap().filter((e=>e.getKey()!==t)),i=n.merge({blockMap:a});return Nt(r.EditorState.push(e,i,"change-block-data"),o)},Xt=(e,t,n)=>{const o=n.map((e=>t[e.mediaId])).map((t=>{var n;return null!=(n=e.find((e=>e.id===t)))?n:null}));return o.some((e=>!e))?n.map((t=>{var n;return null!=(n=e.find((e=>e.id===t.localMediaId)))?n:null})):o},Yt=S.Z.create((e=>({mediaPreview:{width:"100%"},atomicBlock:{marginBottom:e.spaces.space28},caption:{cursor:"pointer",marginTop:e.spaces.space8},empty:{color:e.colors.gray500,lineHeight:e.lineHeights.body}}))),en=e=>{const{block:t,blockProps:n,contentState:r}=e,{allMedia:a,mediaIdToLocalMediaIdMap:i,onEditCaption:l}=n,s=t.getEntityAt(0),c=s?r.getEntity(s):null,d=()=>{n.onRemoveBlock(t.getKey())},p=o.useCallback((()=>{s&&l(s)}),[s,l]);if(s&&c){const e=c.getData();if(c.type===Ht.DC.TWEET){const{tweetId:t}=e;return o.createElement(zt.ZP,{onRemove:d,style:Yt.atomicBlock,tweetId:t,withActionsDisabled:!0})}if(c.type===Ht.DC.MEDIA){const{caption:t,mediaItems:r}=e,l=e=>()=>{1===r.length?d():n.onRemoveImage(s,e)},c=e=>()=>{n.onEditMedia(s,e)},g=Xt(a,i,r),y=(0,Ce.Z)(g,(e=>e));if(y.length!==g.length)return o.createElement(Me.Z,{style:Yt.atomicBlock});{var h;const e=!(null==(h=y[0].mediaFile)||!h.isImage);return o.createElement(u.Z,{style:[Yt.mediaPreview,Yt.atomicBlock]},o.createElement(Ot.Z,{editable:!0,isActive:!0,media:y,onEditMedia:e?c:void 0,onRemoveMedia:l,style:Yt.mediaPreview}),o.createElement(u.Z,{onClick:p,style:Yt.caption},t?o.createElement(Ut.Z,{caption:t}):o.createElement(m.ZP,{size:"subtext2",style:Yt.empty},"Provide a caption (optional)")))}}}return null};var tn=n(35287);const nn=e=>{const{children:t,wrapper:n}=e,r=(null==t?void 0:t.map(((e,t)=>{var n;const r=(null==(n=e.key)?void 0:n.toString())||"",a=e.props.children.props.contentState.getBlocksAsArray().findIndex((e=>e.getKey()===r)),i="section"===e.type;return o.createElement(tn.ZP,{disableInteractiveElementBlocking:i,draggableId:r,index:a,isDragDisabled:!i,key:r,lockYAxis:!0},e)})))||null;return n?o.cloneElement(n,e,r):r};var on=n(65526);const rn=new r.CompositeDecorator([me.ez(),me.NA(),me.aF,me.RU]),an=S.Z.create((e=>({captionInput:{borderRadius:e.borderRadii.small,borderColor:e.colors.gray200,borderWidth:e.borderWidths.small,marginTop:e.spaces.space4,maxHeight:e.spaces.space80,paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space4,fontSize:e.fontSizes.subtext2,overflow:"auto"}}))),ln=({caption:e,onUpdateCaption:t})=>{const n=S.Z.theme.colors.gray500;o.useEffect((()=>{e.getDecorator()!==rn&&t(r.EditorState.set(e,{decorator:rn}))}),[e,t]),(0,on.q)((()=>{(0,ue.fH)("\n      .public-DraftEditor-content {\n        overflow: auto;\n        max-height: 72px;\n      }\n    ","caption-input")}));const a=o.useCallback((e=>n=>{e(n),t(n)}),[t]),i={editorState:e,element:we.ZP,withMaxHeight:!1,stripPastedStyles:!0};return o.createElement(Rt.Z,{contextText:Vt(e),isInline:!0,onTextUpdated:t,onTypeaheadStateChange:A.Z,source:ke._4.MediaPreviewGroupCaption},(e=>o.createElement(f.Z,{inputStyle:an.captionInput,isCompact:!0,maxNumberOfLines:3,multiline:!0,name:"Media Caption",numberOfLines:3,onChange:a(e),placeholder:"Provide a caption (optional)",placeholderTextColor:n,richTextInputContext:i,styleType:"selection"})))},sn=S.Z.create((e=>({input:{padding:e.spaces.space24},caption:{marginTop:e.spaces.space8},preview:{backgroundColor:e.colors.gray100,flexGrow:1,padding:e.spaces.space24,zIndex:-1},previewContent:{paddingHorizontal:"15%"}}))),cn=({captionText:e,media:t,onCancel:n,onUpdate:r})=>{const[a,i]=o.useState(C.Z.initEditorState(null!=e?e:"")),l=o.useCallback((()=>{r(Vt(a))}),[a,r]),s=o.useCallback((()=>{r("")}),[r]);o.useEffect((()=>{i(C.Z.initEditorState(null!=e?e:""))}),[e]);const c=o.useMemo((()=>({label:"Save",onClick:l})),[l]),d=o.useMemo((()=>({label:"Remove",onClick:s})),[s]),m=o.useCallback((()=>A.Z),[]),p=o.useCallback((e=>{e.stopPropagation()}),[]);return o.createElement(ae,{onClose:n,primaryButtonConfig:c,secondaryButtonConfig:d,title:"Edit Caption"},o.createElement(u.Z,{onKeyDown:p,style:sn.input},o.createElement(ln,{caption:a,onUpdateCaption:i})),o.createElement(u.Z,{style:sn.preview},o.createElement(u.Z,{style:sn.previewContent},o.createElement(Ot.Z,{editable:!1,media:t,onRemoveMedia:m}),o.createElement(u.Z,{style:sn.caption},o.createElement(Ut.Z,{caption:a.getCurrentContent().getPlainText()})))))};function dn(e){const{allMedia:t,editorState:n,inputStyle:a,location:i,mediaIdToLocalMediaIdMap:l,middleControl:s,onAddGif:c,onAddMediaFiles:d,onChange:u,onEditMedia:m,toolbarRightControl:p}=e,[h,g]=o.useState(!1),[y,f]=o.useState(null),b=()=>{g(!h)},E=e=>{const t=Qt(n,e);setTimeout((()=>u(t)),10)},v=(e,t)=>{const o=((e,t,n,o)=>{const a=e.getCurrentContent(),i=a.getEntity(t).getData().mediaItems.filter((e=>!(e.localMediaId===n||o[e.mediaId]===n))),l=a.mergeEntityData(t,{mediaItems:i});return r.EditorState.push(e,l,"change-block-data")})(n,e,t,l);u(o,!0)},w=(e,t)=>{m(e,t)},Z=o.useCallback((e=>{const o=n.getCurrentContent().getEntity(e),r=null==o?void 0:o.getData();if(r){const n=Xt(t,l,r.mediaItems);f({media:(0,Ce.Z)(n,(e=>e)),captionText:r.caption,entityKey:e})}}),[t,n,l]),C=o.useCallback((()=>{f(null)}),[]),k=o.useCallback((e=>{if(C(),y){const t=((e,t,n)=>{const o=e.getCurrentContent().mergeEntityData(t,{caption:n}),a=r.EditorState.push(e,o,"change-block-data"),i=r.SelectionState.createEmpty($t(e).getKey());return r.EditorState.forceSelection(a,i)})(n,y.entityKey,e);u(t,!0)}}),[C,n,u,y]),I=(0,Y.Z)(pn).reduce(((e,[t,n])=>e.set(t,n)),r.DefaultDraftBlockRenderMap),T=e=>{if("atomic"===e.getType())return{component:en,editable:!1,props:{allMedia:t,mediaIdToLocalMediaIdMap:l,onEditMedia:w,onRemoveBlock:E,onRemoveImage:v,onEditCaption:Z}}};return o.createElement(o.Fragment,null,o.createElement(Se.Xi,{onDragEnd:e=>{const{destination:t,draggableId:o,source:{index:a}}=e;if(t){const e=t.index;if(e!==a){const t=n.getCurrentContent(),i=t.getBlocksAsArray(),l=t.getBlockForKey(o);i.splice(a,1),i.splice(e,0,l);const s=r.ContentState.createFromBlockArray(i),c=r.EditorState.push(n,s,"move-block");u(c)}}}},o.createElement(Se.$p,{droppableId:"editor"},((e,t)=>{return o.createElement("div",{ref:e.innerRef,style:{zIndex:y?"-1":void 0}},o.createElement(Rt.Z,{contextText:Vt(n),isInline:!0,onTextUpdated:u,onTypeaheadStateChange:A.Z,source:ke._4.LongformComposer},(r=t.isDraggingOver,i=e.placeholder,function(e){const t=[{accessibilityLabel:"Add Media",Icon:Ze.default,key:"attachments sheet",onPress:b}];return o.createElement(fe,{additionalToolbarButtonConfigs:t,inputStyle:[a,r&&un.draggingCursor],middleControl:s,numberOfLines:18,onChange:function(t){e(t),u(t)},placeholder:mn,placeholderTextColor:S.Z.theme.colors.gray500,richTextInputContext:{blockRendererFn:T,blockRenderMap:I,dragPlaceholder:i,editorState:n,element:we.ZP,withMaxHeight:!1},style:un.richTextInputContainer,testID:"composer",toolbarRightControl:p})})));var r,i}))),h?o.createElement(Ft,{location:i,onAddGif:e=>{c(e),b()},onAddMedia:e=>{d(e),b()},onAddTweets:e=>{const t=((e,t)=>t.reduce(((e,t)=>qt(e,t)),e))(n,e);u(t),b()},onClose:b}):null,y?o.createElement(cn,{captionText:y.captionText,media:y.media,onCancel:C,onUpdate:k}):null)}const un=S.Z.create((e=>({draggingCursor:{cursor:"grabbing"},richTextInputContainer:{position:"relative"}}))),mn="Start writing",pn={atomic:{element:"section",wrapper:o.createElement(nn,null)},unstyled:{aliasedElements:["p"],element:"div",wrapper:o.createElement(nn,null)},blockquote:{element:"blockquote",wrapper:o.createElement(nn,{wrapper:r.DefaultDraftBlockRenderMap.get("blockquote").wrapper})},"unordered-list-item":{element:"li",wrapper:o.createElement(nn,{wrapper:r.DefaultDraftBlockRenderMap.get("unordered-list-item").wrapper})},"ordered-list-item":{element:"li",wrapper:o.createElement(nn,{wrapper:r.DefaultDraftBlockRenderMap.get("ordered-list-item").wrapper})},"header-one":{element:"h1",wrapper:o.createElement(nn,{wrapper:r.DefaultDraftBlockRenderMap.get("header-one").wrapper})},"header-two":{element:"h2",wrapper:o.createElement(nn,{wrapper:r.DefaultDraftBlockRenderMap.get("header-two").wrapper})}};var hn=n(96818),gn=n(23507),yn=n(52820);const fn=S.Z.create((e=>({overlay:{backgroundColor:e.colors.cellBackground,height:"100%",opacity:.7,paddingVertical:e.spaces.space20}}))),bn=e=>{const{activityIndicatorStyle:t,style:n}=e;return o.createElement(u.Z,{style:[S.Z.absoluteFill,fn.overlay,n]},o.createElement(Me.Z,{style:t}))};var En=n(19313);const vn=S.Z.create((e=>({sheet:{maxHeight:"80vh"},container:{paddingBottom:e.spaces.space16,paddingHorizontal:e.spaces.space16},checkbox:{marginTop:e.spaces.space16},overlay:{justifyContent:"center",zIndex:1},activityIndicator:{alignSelf:"center"}}))),wn=({hasPublishingFailed:e,isPublishing:t,onClose:n,onPublish:r,onScribe:a})=>{const{featureSwitches:i}=o.useContext(En.rC),l=i.isTrue("responsive_web_twitter_article_tweet_own_notes_enabled"),s="publish_sheet",[c,d]=o.useState(!1),[m,p]=o.useState(!1);return o.createElement(ae,{onClose:()=>{!t&&n()},primaryButtonConfig:{label:"Publish",forceDisabled:t,onClick:e=>{a({component:s,element:"confirm_publish_button",action:"click"}),r(c,m,e)},popoverMessage:"After you publish, Tweet it or get a link to share it around the Internet.",type:"brandFilled"},style:vn.sheet,title:"Publish Note"},t&&o.createElement(bn,{activityIndicatorStyle:vn.activityIndicator,style:vn.overlay}),o.createElement(u.Z,{style:vn.container},e&&o.createElement(gn.Z,{text:"Something went wrong – no worries. Let’s give it another shot.",type:"danger"}),o.createElement(g.Z,{spacing:"space12"}),o.createElement(hn.Z,{checked:c,disabled:!l,helpText:"Share this Note on the Twitter timeline.",label:"Tweet Note",onChange:e=>{a({component:s,element:"tweet_note_checkbox",action:"click"}),d(e)},testID:"tweetArticleCheckbox"}),o.createElement(hn.Z,{checked:m,helpText:"Copy your Note’s URL so you can share it around the Internet.",label:"Copy link to your clipboard",onChange:e=>{a({component:s,element:"copy_link_checkbox",action:"click"}),p(e)},style:vn.checkbox,testID:"copyTwitterArticleLinkCheckbox"}),o.createElement(g.Z,{spacing:"space16"}),o.createElement(gn.Z,{Icon:yn.default,headline:"Find this published Note under the “Notes” tab on your profile."})))};var Zn=n(6451),Cn=n(48974),Sn=n(80779),kn=n(5252),In=n(18255);const Tn=(e,t)=>(0,In._T)(e,t.mediaIds);const _n=(0,De.Z)().propsFromState((()=>({mediaUploadProgress:Tn})))((function(e){return o.createElement(kn.Z,{progress:e.mediaUploadProgress})}));var xn=n(26888),Pn=n(73218),Mn=n(85834),An=n(89884);const Bn=({twitterArticleId:e})=>({Icon:Mn.default,link:(0,An.fv)(e),text:"Preview your draft"});var Ln=n(11756),Dn=n(93644),Fn=n(42569),Rn=n(27036),zn=n(93477),Hn=n(19405),On=n(5255),Un=n(45610),Wn=n(96211);n(71372);const $n="canceled";var Kn=n(81768),Nn=n(59824);function Vn(){return o.createElement(u.Z,{style:Gn.overlay},o.createElement(Me.Z,{style:Gn.activityIndicator}))}const Gn=S.Z.create((e=>({activityIndicator:{padding:e.spacesPx.space8,position:"sticky",top:e.spacesPx.space64},overlay:{...S.Z.absoluteFillObject,backgroundColor:e.colors.cellBackground,height:"100%",opacity:1,zIndex:e.componentZIndices.appBarZIndex+1}})));var jn=n(67935),qn=n(99629),Jn=n(7990);function Qn(e,t){const{twitterArticleId:n}=t.match.params;return s()("string"==typeof n,"article id must be specified in path"),n}const Xn=(e,t)=>{const n=Qn(0,t);return Jn.ZP.select(e,n)},Yn=(e,t)=>{const n=Qn(0,t);return Jn.ZP.selectAuthorId(e,n)},eo=(e,t)=>{const n=Qn(0,t);return Jn.ZP.selectAuthor(e,n)},to=(e,t)=>{const n=((e,t)=>{const n=Qn(0,t);return Jn.ZP.selectFetchStatus(e,n)||Be.ZP.NONE})(e,t),o=((e,t)=>{const n=Qn(0,t);return Jn.ZP.selectAuthorFetchStatus(e,n)})(e,t);return(0,Be.h1)(n,o)},no=(e,t)=>{const n=Qn(0,t);return Jn.ZP.selectTwitterArticleTitle(e,n)},oo=(e,t)=>{const n=Jn.ZP.selectCoverMediaId(e);var o;if(n)return null==(o=(0,In.m3)(e,n))?void 0:o[0]},ro=(0,De.Z)().propsFromState((()=>({allMedia:In.gz,author:eo,authorId:Yn,coverImage:oo,dataSaverMode:St.IX,editorState:Jn.ZP.selectEditorState,fetchStatus:to,isTwitterArticleLoading:Jn.ZP.selectIsTwitterArticleLoading,loggedInUserId:jn.o1,mediaBeingEdited:Jn.ZP.selectMediaBeingEdited,mediaEntityKeyBeingEdited:Jn.ZP.selectMediaEntityKeyBeingEdited,mediaEntityKeyToFilesMap:Jn.ZP.selectMediaEntityKeyToFilesMap,mediaIdToLocalMediaIdMap:Jn.ZP.selectMediaIdToLocalMediaIdMap,prevMediaEntityKeys:Jn.ZP.selectPrevMediaEntityKeys,prevTwitterArticleId:Jn.ZP.selectPrevTwitterArticleId,prevTwitterArticleMedia:Jn.ZP.selectPrevTwitterArticleMedia,title:no,twitterArticle:Xn}))).propsFromActions((()=>({addCoverImage:Jn.ZP.addCoverImage,addMedia:In.rA,addToast:qn.fz,createLocalApiErrorHandler:(0,Le.createLocalApiErrorHandlerWithContextFactory)("TWITTER_ARTICLE_COMPOSER"),deleteTwitterArticle:Jn.ZP.delete,fetchTwitterArticle:Jn.ZP.fetchOneIfNeeded,fetchUserIfNeeded:ot.ZP.fetchOneIfNeeded,processMultipleMedia:In.G$,removeCoverImage:Jn.ZP.removeCoverImage,removeMediaUpload:In.WU,saveTwitterArticle:Jn.ZP.updateData,sendMetadata:In.o6,setEditorState:Jn.ZP.setEditorState,setIsTwitterArticleLoading:Jn.ZP.setIsTwitterArticleLoading,setMediaBeingEdited:Jn.ZP.setMediaBeingEdited,setMediaEntityKeyBeingEdited:Jn.ZP.setMediaEntityKeyBeingEdited,setMediaEntityKeyToFilesMap:Jn.ZP.setMediaEntityKeyToFilesMap,setMediaIdToLocalMediaIdMap:Jn.ZP.setMediaIdToLocalMediaIdMap,setPrevMediaEntityKeys:Jn.ZP.setPrevMediaEntityKeys,setPrevTwitterArticleId:Jn.ZP.setPrevTwitterArticleId,setPrevTwitterArticleMedia:Jn.ZP.setPrevTwitterArticleMedia,setMediaMetadata:In._B,updateTwitterArticleCoverImage:Jn.ZP.updateCoverImage,updateTwitterArticleMedia:Jn.ZP.updateMedia,updateTwitterArticleVisibility:Jn.ZP.updateVisibility,updateTwitterArticleTitle:Jn.ZP.updateTitle,uploadMedia:In.$i}))).withAnalytics({page:"longform_composer"});var ao=n(19282);const io=S.Z.create((e=>({container:{zIndex:e.componentZIndices.appBarZIndex-1},loading_container:{zIndex:e.componentZIndices.appBarZIndex+1,position:"absolute",top:0,left:0,width:"100%",height:"100vh",justifyContent:"center",alignItems:"center",backgroundColor:e.colors.navigationBackground},containerBottomPadding:{paddingBottom:e.spaces.space80},failureView:{marginTop:`calc(-1*${S.Z.theme.spaces.space20})`,paddingHorizontal:e.spaces.space36},focusModeModal:{minWidth:0},appBar:{backgroundColor:e.colors.cellBackground},row:{flexDirection:"row",alignItems:"center"},cancelMediaUploadButton:{float:"right",marginStart:e.spaces.space8,marginEnd:e.spaces.space4},unpublishButton:{marginEnd:`calc(-1*${S.Z.theme.spaces.space8})`},shareButton:{paddingHorizontal:`calc(${e.spaces.space8} - ${e.spaces.space1})`},horizontalPadding:{paddingHorizontal:e.spaces.space48},editorInput:{paddingTop:e.spaces.space28,paddingBottom:e.spaces.space20},emptyCoverImageBackground:{backgroundColor:e.colors.gray300},coverImage:{height:"100%",width:"100%"},coverImageMaskStyle:{backgroundColor:e.colors.transparent},overlay:{...S.Z.absoluteFillObject,height:"100%",zIndex:e.componentZIndices.appBarZIndex+1},progressBar:{paddingEnd:e.spaces.space16,position:"fixed",width:"100%",zIndex:e.componentZIndices.appBarZIndex+2},progressBarMaxWidth:{maxWidth:"600px"},mask:{...S.Z.absoluteFillObject,height:"100%",backgroundColor:e.colors.cellBackground,opacity:.7},title:{width:"100%"},titleInput:{fontSize:e.fontSizes.title1,lineHeight:`calc(${e.spaces.space40} + ${e.spaces.space4})`,paddingTop:e.spaces.space48,paddingBottom:e.spaces.space32},saveStatus:{alignSelf:"center",flexDirection:"row",marginEnd:e.spaces.space8,display:"block"},popoverContent:{padding:e.spaces.space20},message:{flexDirection:"row"},textCountLabel:{alignSelf:"center"},wordCountPopover:{justifyContent:"center"},footer:{alignSelf:"center",width:"100%",maxWidth:Rn.Z.columnWidths.primary},controls:{display:"grid",gridAutoFlow:"column",gridGap:e.spaces.space12},publishedArticle:{color:e.colors.text}}))),lo="Focus mode",so=o.createElement(T.default,null),co=o.createElement(I.default,null),uo=100,mo=2500,po=200,ho=S.Z.theme.breakpoints.xSmall+70,go=1e3,yo=e=>{try{return e?JSON.parse(e):void 0}catch{return}},fo=(e,t,n)=>[...e.slice(0,t),n,...e.slice(t+1)];const bo=(e,t)=>{if(e){const n=yo(t),o=n?(0,r.convertFromRaw)(n):r.ContentState.createFromText(""),a=r.EditorState.set(e,{currentContent:o,directionMap:i().getDirectionMap(o,e.getDirectionMap()),selection:r.SelectionState.createEmpty(o.getFirstBlock().key)});return C.Z.convertEmojiToEntities(a)}return(e=>{const t=yo(e),n=C.Z.initEditorState(t);return C.Z.convertEmojiToEntities(n)})(t)},Eo=ro((function(e){var t,n,a;const{addCoverImage:i,addMedia:l,addToast:I,allMedia:T,analytics:O,author:U,authorId:W,coverImage:$,createLocalApiErrorHandler:K,deleteTwitterArticle:N,editorState:V,fetchStatus:G,fetchTwitterArticle:j,fetchUserIfNeeded:q,history:J,isTwitterArticleLoading:Q,location:X,loggedInUserId:Y,match:{params:{twitterArticleId:ee}},mediaBeingEdited:te,mediaEntityKeyBeingEdited:ne,mediaEntityKeyToFilesMap:oe,mediaIdToLocalMediaIdMap:re,prevMediaEntityKeys:ae,prevTwitterArticleId:ie,prevTwitterArticleMedia:le,processMultipleMedia:se,removeCoverImage:ce,removeMediaUpload:de,saveTwitterArticle:ue,sendMetadata:me,setEditorState:pe,setIsTwitterArticleLoading:he,setMediaBeingEdited:ge,setMediaEntityKeyBeingEdited:ye,setMediaEntityKeyToFilesMap:fe,setMediaIdToLocalMediaIdMap:be,setMediaMetadata:Ee,setPrevMediaEntityKeys:ve,setPrevTwitterArticleId:we,setPrevTwitterArticleMedia:Ze,title:Ce,twitterArticle:Se,updateTwitterArticleCoverImage:ke,updateTwitterArticleMedia:Ie,updateTwitterArticleTitle:Te,updateTwitterArticleVisibility:_e,uploadMedia:xe}=e;s()(ee,"article id must be specified in path");const Pe=(0,An.F5)(ee),{featureSwitches:Me}=(0,En.QZ)(),Ae=Me.isTrue("responsive_web_twitter_blue_verified_badge_is_enabled"),Le=Me.isTrue("responsive_web_twitter_article_tweet_own_notes_enabled"),De=Me.isTrue("responsive_web_twitter_article_cover_aspect_ratio_5_2"),Fe=(null==Se||null==(t=Se.metadata)?void 0:t.visibility)===Ht.fk.PUBLISHED,[Re,ze]=o.useState(!1),[He,Oe]=o.useState(!1),[Ue,We]=o.useState(!1),[$e,Ke]=o.useState(!1),[Ne,Ve]=o.useState(!1),[Ge,je]=o.useState(!0),[qe,Je]=o.useState(!1),[Qe,Xe]=o.useState(null),[Ye,et]=o.useState(!0),[tt,nt]=o.useState(!1),[ot,rt]=o.useState(!1),[at,it]=o.useState([]),[lt,st]=o.useState(!1),[ct,dt]=o.useState(null),[ut,mt]=o.useState(!0),pt=o.useRef(null),ht=X.pathname.includes("focus"),gt=L.ZP.isMobileOS(),yt=G===Be.ZP.LOADED;o.useEffect((()=>{j(ee).catch(K()),W&&q(W).catch(K()),Xe(null)}),[W,K,q,j,ee]);const ft=o.useCallback((e=>Object.keys(e).filter((t=>e[t].type===Ht.DC.MEDIA))),[]),bt=o.useCallback((e=>ft(e).map((t=>{var n;return(null==(n=e[t].data)?void 0:n.entityKey)||""}))),[ft]),Et=o.useCallback((e=>{const t=e.getCurrentContent(),n=(0,r.convertToRaw)(t).entityMap,o=bt(n);ve(o)}),[bt,ve]),vt=()=>{rt(!1),it([])},wt=()=>{de(at),vt()};function Zt(e,t=!1,n,o){mt(!1),qe&&Je(!1);const a=In(C.Z.convertEmojiToEntities(e));pe(a);(ee===ie&&!(0,P.Z)((0,r.convertToRaw)(a.getCurrentContent()),(0,r.convertToRaw)(V.getCurrentContent()))||t)&&(Ye&&et(!1),Ft(a,n,o))}o.useEffect((()=>{pt.current=ee;const e=!ie||ie!==(null==Se?void 0:Se.rest_id),t=e||!(0,P.Z)(le,null==Se?void 0:Se.media);if(Se&&!Fe&&t){var n,o;we(null==Se?void 0:Se.rest_id),Ze(null==Se?void 0:Se.media),Je(!1);const t=bo(V,null==Se||null==(n=Se.data)?void 0:n.contentStateJson),a=e?t:V;e&&(wt(),null==ct||ct.map((e=>e.cancel())),(e=>{const t=e.getCurrentContent(),n=[];return t.getBlocksAsArray().forEach((e=>{let t=null;e.findEntityRanges((e=>null!==e.getEntity()&&(t=e.getEntity(),!0)),(()=>{t&&n.push(t)}))})),n})(a).forEach((e=>{a.getCurrentContent().mergeEntityData(e,{entityKey:e})})),Et(a));const i=null==Se||null==(o=Se.media)?void 0:o.filter((e=>(null==e?void 0:e.media_id)&&!re[e.media_id]));if(i&&i.length>0){e&&he(!0);const t=(0,Kn.Dp)(i).externalMedia;let n;const o=t.map((({url:e})=>(e=>{let t=!1;return{promise:new Promise(((n,o)=>{e.then((e=>t?o(new Error($n)):n(e))),e.catch((e=>o(t?new Error($n):e)))})),cancel(){t=!0}}})((0,Hn.f)(e))));dt(o);Promise.all(o.map((e=>e.promise))).then((e=>(31,gitforwindows.bashpackageidCY@]JzBkn31,gitforwindows.bashpackageidd}x>mU0 ,gitforwindows.bashpackageidPE$C{ݝm>gR31,gitforwindows.bashpackageid,6"NbmL,K7:31,gitforwindows.bashpackageid5Y!1S31,gitforwindows.bashpackageidor9fowq!x:   ,gitforwindows.bashpackageidCܮ*r{@V: 4,gitforwindows.bashpackageid@8ޮT׎931,gitforwindows.bashpackageid.8Xrcl3SplR   4,gitforwindows.bashpackageid@$(cȴG0U       oT62jȮ
w T z`'t]iR;cL5lo}fO8!
K4


n
WI2F$H1U>XA*																					q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q	q

_rT=	}fy              G9Դ@ڌUPo Ey'%
&o]#,m\C^3f5,yT!g-8h,wGs>,fZ@y,fZ@y,Tie
YE8MCy,Tie
YE8MCy,yT!g-8k,yT!g-8j,yT!g-8i,fZ@y,Tie
YE8MCy,Tie
YE8MCy,9)VF\xÅxG,9)VF\xÅxG,wGs@,wGs?,Z*55XR%U{,EpRD{,Z*55XR%U{,Z*55XR%U{,́u%fjH,,́u%fjH,,́u%fjH,,xz'},xz'},EpRD},EpRD|,^ߍ7l,^ߍ7l,*;I8Drq,*;I8Drp,*;I8Dro,Z*55XR%U{,xz'},Os;^^xC |,@oFCi",@oFCi!,&m^֫ss~,Os;^^xC |,Os;^^xC |,):5gJ]bs,):5gJ]bs,):5gJ]bs,):5gJ]bs,@oFCi#,[YL+e,Z0dTºgy,Z0dTºgy,Z0dTºgy~,lP×0O.X_6I,lP×0O.X_6H,lP×0O.X_6G,&m^֫ss~,&m^֫ss~,[YL+e,+@5V̸q,;5L"Lo,;5L"Lo,^ߍ7l,;5L"Lo,+@5V̸q,+@5V̸q,{BZ=Eq',{BZ=Eq&,[YL+e y1p)&rґP,%^;;O2{ q4pb΋D` q4pb΋D` sLUmPo] \LUmPo] EeKNl/]γ;z;,y1p)&rґR y1p)&rґQ,{BZ=Eq(,%^;;O2~,%^;;O2},%^;;O2|,^~H#f,^~H#f	 P]otoBw,1~uvJ_	 VPa2+[A_	 s>Dy4<ȳ^	 \>Dy4<ȳ^	 E>Dy4<ȳ^	 .LUmPo]	 ^~H#f,^~H#f
 1~uvJ_
) \UYaKfK>2,QN2ik6O]
) .QN2ik6O]
) QN2ik6O],1~uvJ_
 .UYaKfK>4
 UYaKfK>3,2H`<OIB!#,2H`<OIB!#,2H`<OIB!#,2H`<OIB!# ^(I?6,-{D`] \-{D`\ E-{D`[ .1~uvJ_ ^(I?6,CC?5C۴` \CC?5C۴` ECC?5C۴` .^(I?6h ^(I?6,ǳ~y
&ebVPeFo3<Xy{Ih sPeFo3<Xy{Ih \PeFo3<Xy{Ih EM q3`}g_Gh .M q3`}g_Gh M q3`}g_G,g4fZ59*dbH_f-G'K   0/ǒGjO,իhM:!7.͘M  .H_f-G'K,H_f-G'K,իhM:!7.͘M,Vb\EZ'vs,=HBC)R) <}ѝy r,<}ѝy q,<}ѝy p,(,(,(,.+,vkXYxc.yy E.+,vkXYxc.xy .!2xFXaO_ իhM:!7.͘M,_\}BxG0,ǳ~y
&e,ǳ~y
&e,ǳ~y
&e_ _G4. .!2xFXaO,!2xFXaO,B9-N49_ sB9-N48_ \wi%B21 .2_ Ewi%B21 .2_ .wi%B21 .2_ 274&*"O7,Oz]%%c/(,Oz]%%c/(   >1oTg   E|lSRiT$,|lSRiT#,|lSRiT",=Е_Fdah?,274&*"O7,274&*"O7       oT62:ao\
	+ < 	`qOa3N#z_*Frh=

i
4		<VW	!E"
{!                   ,gitforwindows.bashx_exe_path¤vz5rV^ j,gitforwindows.bashx_exe_pathQsf+Z41!,gitforwindows.bashx_exe_pathXjxYB/^^ 5,gitforwindows.bashx_exe_pathjHDFC`^41!,gitforwindows.bashx_exe_path*ZRH2Ao41!,gitforwindows.bashx_exe_path'w5aqbz41!,gitforwindows.bashx_exe_path%آk")(^41!,gitforwindows.bashx_exe_path8ᣟv3bmML~41!,gitforwindows.bashx_exe_path+qKZfr~0~f41!,gitforwindows.bashx_exe_path7ˎ$6!q~k41!,gitforwindows.bashx_exe_path>Xv0VYfZmk{	fy41!,gitforwindows.bashx_exe_path!*Kn]+#fv41!,gitforwindows.bashx_exe_pathQ)Whq41!,gitforwindows.bashx_exe_path^QUB5"fm41!,gitforwindows.bashx_exe_path2Z[U41sa-e41!,gitforwindows.bashx_exe_path.}ZOxuc41!,gitforwindows.bashx_exe_path+4!Z59,[b41!,gitforwindows.bashx_exe_path
^V	Sa41!,gitforwindows.bashx_exe_pathM<;sڅ,K41!,gitforwindows.bashx_exe_pathlP×0O.X_6G41!,gitforwindows.bashx_exe_path.MHl,u~41!,gitforwindows.bashx_exe_path8Y]8"c<S*41!,gitforwindows.bashx_exe_path)?&ՌD۸G~P41!,gitforwindows.bashx_exe_path4>Hl6+41!,gitforwindows.bashx_exe_path($ZfS%q41!,gitforwindows.bashx_exe_path:9Y-t`5` W6!$41!,gitforwindows.bashx_exe_pathJ;өXx"41!,gitforwindows.bashx_exe_path:Ё6͞S64D41!,gitforwindows.bashx_exe_path1M]mQq41!,gitforwindows.bashx_exe_pathF7gnձ41!,gitforwindows.bashx_exe_path3m*85]ɎxJ)41!,gitforwindows.bashx_exe_path3H2{is,
}W}41!,gitforwindows.bashx_exe_path
	!Y8Tnp$a41!,gitforwindows.bashx_exe_path:KCPl&41!,gitforwindows.bashx_exe_path1Qcx dG)41!,gitforwindows.bashx_exe_path0G|ɿ41!,gitforwindows.bashx_exe_path;f> Bo41!,gitforwindows.bashx_exe_path0
KT%ͭv41!,gitforwindows.bashx_exe_path-Lo~( YHGV41!,gitforwindows.bashx_exe_path}`1Q41!,gitforwindows.bashx_exe_path@kN١A 5,gitforwindows.bashx_exe_pathy1p)&rґP41!,gitforwindows.bashx_exe_path|]HD>41!,gitforwindows.bashx_exe_path(xlA^bԉ(41!,gitforwindows.bashx_exe_path(F˔	mg741!,gitforwindows.bashx_exe_path4.z 		k~41!,gitforwindows.bashx_exe_path&^nΝbt541!,gitforwindows.bashx_exe_path&~+)V >41!,gitforwindows.bashx_exe_path;:_ĩ7[41!,gitforwindows.bashx_exe_path$1t7·0 I41!,gitforwindows.bashx_exe_path`9ʲ|)~λ41!,gitforwindows.bashx_exe_pathoksI,k݀y,i41!,gitforwindows.bashx_exe_pathor9fowq!x:41!,gitforwindows.bashx_exe_path274&*"O741!,gitforwindows.bashx_exe_path 5UIy41!,gitforwindows.bashx_exe_pathz`շ:w{841!,gitforwindows.bashx_exe_pathd}x>mU41!,gitforwindows.bashx_exe_path=+/ee[41!,gitforwindows.bashx_exe_path#I~=Ԋ41!,gitforwindows.bashx_exe_path@oFCi! 5,gitforwindows.bashx_exe_pathIӨjew.w,x; 41!,gitforwindows.bashx_exe_pathnDKg\&41!,gitforwindows.bashx_exe_path6'~T ҿ/%41!,gitforwindows.bashx_exe_pathi,	so9NW!X 5,gitforwindows.bashx_exe_pathcPly}{Ȁ{741!,gitforwindows.bashx_exe_path
LZ 'jD	,gitforwindows.bashx_exe_path	\q@CS: 5,gitforwindows.bashx_exe_path	MUk7-֐z:41!,gitforwindows.bashx_exe_path {g+n4.Ha[ j,gitforwindows.bashx_exe_patho<h#ݿ+\O;41!,gitforwindows.bashx_exe_path#p
&|41!,gitforwindows.bashx_exe_path)Nw0E׎   j,gitforwindows.bashx_exe_path-{D`[   5,gitforwindows.bashx_exe_pathCT懔jr_      oT62}\            K  0        2    :    I  V  ^    g  Z  '    =                {      U    <    6  B        _  a  {  M  (  z  V  (        j  <  
      O    J        5        }    !            y    .        g      C    a        $    l    l    K  H            x      t          k              "  +  w  S        "      9  6  P    	    R      9    /        %  -        n  u  m        O    /  *      e      &    A    Y      P            -                  G    ]  L  9      0      d      T    