.createDraftTweet(d)}))})(s,{excludedRecipients:r,inReplyToStatusIdStr:o.id_str})).then((e=>({...s,draft_id_str:e})),(e=>(e.draftTweet=s,Promise.reject(e))))}}),{draftData:{draftTweetId:a}={}}=e;return s({actionTypes:l,context:a?"DRAFT_TWEET_EDIT":"DRAFT_TWEET",meta:{draftParams:e}})},k=e=>(t,r,{api:s,featureSwitches:a,userPersistence:n})=>{const{communityIdValue:i}=e,d=r(),l=y._O(t,{params:e,request:e=>{const{composeSemanticCoreId:r,conversationControlsValue:s,sendData:d=[],excludedRecipients:l,exclusivityControlValue:c,inReplyToStatus:u={},isSelfThreadReply:p=!1,promotedContent:_,isPreview:m=!1,previousTweetId:w,trustedFriendsValue:E}=e,h=(({conversationControlsValue:e,featureSwitches:t,inReplyToStatus:r,isSelfThreadReply:o})=>{const s=!0===t.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),a=!!r.id_str||o;if(s&&!a&&"all"!==e)return e})({featureSwitches:a,conversationControlsValue:s,inReplyToStatus:u,isSelfThreadReply:p});return a.isTrue("conversation_controls_persistence_enabled")&&h!==o.k.community_members&&h!==o.k.super_followers_exclusive&&h!==o.k.trusted_friends_tweet&&n.set("rweb.savedConversationControl",{conversationControl:h||o.k.all}),d.reduce(((o,s,a)=>{const n=0===a;return o.then((o=>{const f=u.conversation_id_str,y=n?u.id_str:o[a-1].id_str,C=n?l:[],R=n?_:void 0,D=n?null:o[0].id_str,P=n&&void 0===u.id_str?c:void 0,x=n&&void 0===u.id_str?E:void 0;let A;i||c?A=void 0:n&&(A=h);const U={batchMode:n&&!p?1===d.length?T.BatchModeType.SINGLE_TWEET:T.BatchModeType.FIRST_TWEET:T.BatchModeType.SUBSEQUENT_TWEET,communityIdValue:i,conversationId:f,conversationControlsValue:A,composeSemanticCoreId:r,excludedRecipients:C,exclusivityControlValue:P,inReplyToStatusIdStr:y,promotedContent:R,firstTweetId:D,trustedFriendsValue:x,isSelfThreadReply:p,isFirstTweet:n,previousTweetId:w},Z=m?((e,t,r={excludedRecipients:[]})=>(o,s,{api:a,featureSwitches:n})=>{const i="subsequent"===r.batchMode&&t.sendData.length>1,d=r.isSelfThreadReply&&r.isFirstTweet;return F(o,e,{...r,isPreview:!0,inReplyToStatusIdStr:i&&!d?void 0:r.inReplyToStatusIdStr}).then((n=>(n.preview=!0,a.Tweets.sendTweet(n).then((a=>{const n=(a.entities.tweets||{})[a.result];n.isPreview=!0,n.conversation_id_str=r.conversationId,a.entities&&o((0,I.dP)(a.entities)),!i||d?o((0,g.Ed)({previewData:t,id:n.id_str})):r.firstTweetId&&o((0,g.wz)({id:r.firstTweetId,linkedTweetId:n.id_str})),e.draftTweetId&&o((0,S.bR)(e.draftTweetId));const l=v.ZP.selectHydrated(s(),n.id_str);if(!l)throw new Error("No hydratedTweet found in redux store for Tweet ID after sending");return l})))))})(s,e,U):((e,t={excludedRecipients:[]})=>(r,o,{api:s,featureSwitches:a})=>F(r,e,t).then((a=>s.Tweets.sendTweet(a).then((s=>{var a;const n=o(),i=b.ZP.selectLoggedInUser(n),d=(s.entities