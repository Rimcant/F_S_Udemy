._windowDimensions)return;const{clientX:e,clientY:o}=t.touches[0];if(!this.state.lastX||!this.state.lastY)return void this.setState({lastX:e,lastY:o});const{lastX:s,lastY:i,zoomCenter:{x:n,y:a}}=this.state,{height:r,width:l}=this._windowDimensions,{height:h,width:d}=this._zoomedDimensions;let c=0,m=0;d-l>0&&(c=e-s),h-r>0&&(m=o-i),this.setState({lastX:e,lastY:o,zoomCenter:{x:Math.min(Math.max(n-c,0),l),y:Math.min(Math.max(a-m,0),r)}})}_handlePinchStart(t){const{touches:e}=t;if(this._updateWindowDimensions(),this._lastDistance=z(e[0],e[1]),1===this.state.zoom){const t=(o=e[0],s=e[1],{x:(o.clientX+s.clientX)/2,y:(o.clientY+s.clientY)/2});this.setState({zoomCenter:this._getZoomCenter(t.x,t.y)}),this.props.onZoomed(!0)}var o,s}_handlePinchMove(t){const{zoom:e,zoomCenter:o}=this.state,{maxZoom:s,maxZoomBounce:i,minZoom:n,minZoomBounce:a}=this.props;if(0===o.x&&0===o.y)return void(2===t.touches.length&&this._handlePinchStart(t));const r=z(t.touches[0],t.touches[1]),l=this._lastDistance?r/this._lastDistance:1,h=M(n-a,s+i,e*l);this._lastDistance=r,this.setState({zoom:h})}_handleTapStart(t){const{touches:e}=t;this._tapCenter=this._getZoomCenter(e[0].clientX,e[0].clientY)}_handleDoubleTap(t){const{maxZoom:e,onZoomed:o}=this.props;1!==this.state.zoom?this.resetZoom():(this._updateWindowDimensions(),this.setState({zoom:e,zoomCenter:this._tapCenter||E.zoomCenter}),o(!0))}_getZoomCenter(t,e){this._ref.current&&(this._itemDimensions=this._ref.current.getBoundingClientRect());const{left:o,top:s}=this._itemDimensions;return{x:t-o,y:e-s}}_updateWindowDimensions(){this._windowDimensions={height:window.innerHeight,width:window.innerWidth}}}k.defaultProps={maxZoom:2.5,maxZoomBounce:.15,minZoom:1,minZoomBounce:.15,onTap:d.Z,onZoomed:d.Z,resetZoom:!1};const L=l.Z.create((t=>({fill:{flex:1}}))),B=k,Y=y().b327c12a,V=y().gff1f69e;class X extends s.PureComponent{constructor(...t){super(...t),this.state={loadingVariant:null,imageLoading:!1},this._handleLoadStart=()=>this.setState({imageLoading:!0}),this._handleLoadEnd=()=>this.setState({imageLoading:!1})}componentDidMount(){this._mountPromiseForTesting=X._selectCachedVariant(this.props.photo).then((t=>this.setState({loadingVariant:t})))}componentDidUpdate(t,e){(0,h.Z)(t.photo,this.props.photo)||(this.setState({loadingVariant:null}),X._selectCachedVariant(this.props.photo).then((t=>this.setState({loadingVariant:t}))))}render(){const{dataSaver:t,imageStyle:e,onError:o,onLoad:n,onTap:a,onZoomed:r,photo:l,resetZoom:h,style:d,zoomable:c}=this.props,{loadingVariant:m}=this.state,u=(t&&m&&Math.max(m.width,m.height)>